<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì•„ì´ë””ì–´ ë„ë‘‘ ë™ë£Œ - ì´í´ë¦½ìŠ¤ ë§ˆì¸ë“œë©</title>
  
  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#7c3aed">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #09090b;
      color: #fff;
      min-height: 100vh;
      padding: 24px;
      line-height: 1.6;
    }
    
    .container {
      max-width: 540px;
      margin: 0 auto;
    }
    
    .header {
      margin-bottom: 32px;
    }

    .back-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: #71717a;
      text-decoration: none;
      font-size: 14px;
      margin-bottom: 16px;
    }

    .back-btn:hover {
      color: #a78bfa;
    }

    .header-content {
      text-align: center;
    }

    .header-category {
      font-size: 12px;
      color: #a78bfa;
      margin-bottom: 8px;
    }
    
    .header h1 {
      font-size: 22px;
      color: #fff;
      margin-bottom: 4px;
    }
    
    .header p {
      font-size: 14px;
      color: #71717a;
    }
    
    .progress {
      display: flex;
      gap: 8px;
      margin-bottom: 24px;
    }
    
    .progress-bar {
      height: 4px;
      flex: 1;
      border-radius: 4px;
      background: #27272a;
      transition: background 0.3s;
    }
    
    .progress-bar.completed { background: #a78bfa; }
    .progress-bar.current { background: rgba(167, 139, 250, 0.5); }
    
    .scenario-card {
      background: #18181b;
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 24px;
    }

    .stage-label {
      font-size: 11px;
      color: #71717a;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .context {
      font-size: 13px;
      color: #a1a1aa;
      margin-bottom: 12px;
      padding: 12px;
      background: #1f1f23;
      border-radius: 8px;
    }
    
    .situation {
      font-size: 17px;
      line-height: 1.8;
    }
    
    .choices {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    
    .choice-btn {
      width: 100%;
      text-align: left;
      padding: 16px;
      background: #18181b;
      border: 1px solid #27272a;
      border-radius: 12px;
      color: #fff;
      font-size: 15px;
      cursor: pointer;
      transition: all 0.2s;
      line-height: 1.6;
    }
    
    .choice-btn:hover {
      background: #27272a;
      border-color: #3f3f46;
    }
    
    .result-section {
      display: none;
    }
    
    .result-section.show {
      display: block;
    }
    
    .selected-choice {
      padding: 16px;
      background: #18181b;
      border: 2px solid #3f3f46;
      border-radius: 12px;
      margin-bottom: 16px;
    }
    
    .selected-header {
      font-size: 13px;
      color: #71717a;
      margin-bottom: 8px;
    }
    
    .selected-text {
      color: #d4d4d8;
      line-height: 1.6;
    }
    
    .outcome-card {
      padding: 16px;
      background: rgba(24, 24, 27, 0.5);
      border-radius: 12px;
      margin-bottom: 16px;
    }
    
    .outcome-label {
      font-size: 13px;
      color: #71717a;
      margin-bottom: 8px;
    }
    
    .outcome-text {
      color: #d4d4d8;
      line-height: 1.8;
    }
    
    .principle-card {
      padding: 20px;
      background: linear-gradient(135deg, rgba(124, 58, 237, 0.15), #18181b);
      border: 1px solid rgba(124, 58, 237, 0.3);
      border-radius: 12px;
      margin-bottom: 16px;
    }
    
    .principle-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 12px;
    }

    .principle-icon {
      font-size: 20px;
    }

    .principle-label {
      font-size: 11px;
      color: #a78bfa;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .principle-name {
      color: #fff;
      font-weight: 600;
      font-size: 16px;
      margin-bottom: 8px;
    }
    
    .principle-explanation {
      color: #a1a1aa;
      line-height: 1.8;
      font-size: 14px;
    }

    .evaluation-card {
      display: flex;
      gap: 12px;
      padding: 14px 16px;
      border-radius: 12px;
      margin-bottom: 16px;
      align-items: flex-start;
    }

    .evaluation-card.positive {
      background: rgba(74, 222, 128, 0.1);
      border: 1px solid rgba(74, 222, 128, 0.3);
    }

    .evaluation-card.neutral {
      background: rgba(251, 191, 36, 0.1);
      border: 1px solid rgba(251, 191, 36, 0.3);
    }

    .evaluation-card.negative {
      background: rgba(248, 113, 113, 0.1);
      border: 1px solid rgba(248, 113, 113, 0.3);
    }

    .evaluation-icon {
      font-size: 18px;
      flex-shrink: 0;
    }

    .evaluation-text {
      font-size: 14px;
      line-height: 1.7;
    }

    .evaluation-card.positive .evaluation-text { color: #4ade80; }
    .evaluation-card.neutral .evaluation-text { color: #fbbf24; }
    .evaluation-card.negative .evaluation-text { color: #f87171; }

    .other-choices-section {
      margin-bottom: 16px;
    }

    .other-choices-toggle {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 12px;
      background: transparent;
      border: 1px solid #27272a;
      border-radius: 10px;
      color: #71717a;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .other-choices-toggle:hover {
      border-color: #3f3f46;
      color: #a1a1aa;
    }

    .other-choices-toggle.open {
      border-color: #3f3f46;
      background: #18181b;
    }

    .other-choices-toggle.open svg {
      transform: rotate(180deg);
    }

    .other-choices-content {
      margin-top: 12px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .other-choices-content.hidden {
      display: none;
    }

    .other-choice-card {
      background: #131316;
      border: 1px solid #1f1f23;
      border-radius: 12px;
      padding: 14px;
    }

    .other-choice-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }

    .eval-badge {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 10px;
    }

    .eval-badge.positive {
      background: rgba(74, 222, 128, 0.2);
      color: #4ade80;
    }

    .eval-badge.neutral {
      background: rgba(251, 191, 36, 0.2);
      color: #fbbf24;
    }

    .eval-badge.negative {
      background: rgba(248, 113, 113, 0.2);
      color: #f87171;
    }

    .other-choice-text {
      font-size: 14px;
      color: #a1a1aa;
      margin-bottom: 10px;
      line-height: 1.6;
    }

    .other-choice-outcome {
      font-size: 13px;
      color: #71717a;
      margin-bottom: 10px;
      padding: 10px;
      background: #18181b;
      border-radius: 8px;
      line-height: 1.6;
    }

    .other-choice-eval {
      font-size: 12px;
      color: #a1a1aa;
      margin-bottom: 10px;
      padding: 8px 10px;
      background: rgba(39, 39, 42, 0.5);
      border-radius: 6px;
      line-height: 1.6;
    }

    .other-choice-principle {
      font-size: 12px;
      color: #71717a;
    }

    .other-choice-principle strong {
      color: #a78bfa;
    }

    .next-btn {
      width: 100%;
      padding: 16px;
      background: #7c3aed;
      border: none;
      border-radius: 12px;
      color: #fff;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: background 0.2s;
    }
    
    .next-btn:hover {
      background: #6d28d9;
    }
    
    /* Final Result Screen */
    .final-screen {
      display: none;
      padding: 20px 0;
    }
    
    .final-screen.show {
      display: block;
    }

    .clear-card {
      background: linear-gradient(135deg, #1f1f23, #18181b);
      border: 1px solid #27272a;
      border-radius: 20px;
      padding: 32px 24px;
      margin-bottom: 24px;
      text-align: center;
    }

    .clear-icon {
      font-size: 56px;
      margin-bottom: 16px;
    }

    .clear-title {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .clear-subtitle {
      font-size: 14px;
      color: #71717a;
      margin-bottom: 20px;
    }

    .clear-exp {
      display: inline-block;
      padding: 8px 16px;
      background: rgba(167, 139, 250, 0.2);
      border-radius: 20px;
      color: #a78bfa;
      font-weight: 600;
    }

    .principles-collected {
      background: #18181b;
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 24px;
    }

    .principles-title {
      font-size: 14px;
      color: #71717a;
      margin-bottom: 16px;
    }

    .principle-item {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 12px;
      background: #1f1f23;
      border-radius: 10px;
      margin-bottom: 8px;
    }

    .principle-item:last-child {
      margin-bottom: 0;
    }

    .principle-item-icon {
      font-size: 20px;
      flex-shrink: 0;
    }

    .principle-item-content {
      flex: 1;
    }

    .principle-item-name {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .principle-item-desc {
      font-size: 12px;
      color: #71717a;
      line-height: 1.5;
    }

    .share-section {
      margin-bottom: 24px;
    }
    
    .share-label {
      font-size: 14px;
      color: #71717a;
      margin-bottom: 12px;
      text-align: center;
    }
    
    .share-buttons {
      display: flex;
      gap: 10px;
      justify-content: center;
    }
    
    .share-btn {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 12px 18px;
      background: #27272a;
      border: 1px solid #3f3f46;
      border-radius: 10px;
      color: #fff;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .share-btn:hover {
      background: #3f3f46;
    }

    .share-btn.success {
      background: #166534;
      border-color: #22c55e;
    }

    .action-buttons {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .home-btn {
      width: 100%;
      padding: 16px;
      background: #7c3aed;
      border: none;
      border-radius: 12px;
      color: #fff;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      text-decoration: none;
      display: block;
      text-align: center;
    }

    .home-btn:hover {
      background: #6d28d9;
    }

    .restart-btn {
      width: 100%;
      padding: 16px;
      background: transparent;
      border: 1px solid #3f3f46;
      border-radius: 12px;
      color: #a1a1aa;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .restart-btn:hover {
      background: #27272a;
      color: #fff;
    }

    .install-btn {
      width: 100%;
      margin-top: 8px;
      padding: 14px;
      background: linear-gradient(135deg, #7c3aed, #5b21b6);
      border: none;
      border-radius: 12px;
      color: #fff;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: all 0.2s;
    }

    .install-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(124, 58, 237, 0.4);
    }

    .install-btn.hidden { display: none; }

    .promo-section {
      margin-top: 32px;
      padding-top: 24px;
      border-top: 1px solid #27272a;
    }

    /* ì´í´ë¦½ìŠ¤ ë” ì•Œì•„ë³´ê¸° */
    .eclipse-section {
      text-align: center;
      margin-bottom: 24px;
    }
    
    .eclipse-section-title {
      font-size: 14px;
      color: #71717a;
      margin-bottom: 16px;
    }
    
    .youtube-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 14px 32px;
      background: #27272a;
      border: 1px solid #3f3f46;
      border-radius: 12px;
      color: #fff;
      font-size: 15px;
      font-weight: 500;
      text-decoration: none;
      transition: all 0.2s;
    }
    
    .youtube-btn:hover {
      background: #3f3f46;
      transform: translateY(-2px);
    }
    
    .youtube-btn svg {
      fill: #ff0000;
    }
    
    /* ì±… ì„¹ì…˜ */
    .books-section {
      text-align: center;
      padding-top: 24px;
      border-top: 1px solid #27272a;
    }
    
    .books-section-title {
      font-size: 14px;
      color: #71717a;
      margin-bottom: 20px;
    }
    
    .books-grid {
      display: flex;
      gap: 16px;
      justify-content: center;
    }
    
    .book-item {
      flex: 1;
      max-width: 140px;
      text-decoration: none;
      color: #fff;
      transition: all 0.2s;
    }
    
    .book-item:hover {
      transform: translateY(-4px);
    }
    
    .book-item img {
      width: 100%;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
      margin-bottom: 10px;
    }
    
    .book-item-title {
      font-size: 13px;
      color: #a1a1aa;
    }

    .book-promo {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 16px;
      background: linear-gradient(135deg, #1a1520 0%, #18181b 100%);
      border: 1px solid #2d2438;
      border-radius: 12px;
      text-decoration: none;
      color: #fff;
      transition: all 0.2s;
    }

    .book-promo:hover {
      border-color: #a78bfa;
      transform: translateY(-2px);
    }

    .book-promo-images {
      display: flex;
      gap: 6px;
      flex-shrink: 0;
    }

    .book-promo-img {
      width: 48px;
      height: auto;
      border-radius: 4px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.4);
    }

    .book-promo-text { flex: 1; }
    .book-promo-series { font-size: 11px; color: #a78bfa; margin-bottom: 2px; }
    .book-promo-title { font-size: 14px; font-weight: 500; }

    .hidden {
      display: none !important;
    }

    .exp-toast {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #7c3aed;
      padding: 12px 20px;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 600;
      z-index: 1000;
      animation: fadeInOut 2s ease-in-out;
    }

    @keyframes fadeInOut {
      0% { opacity: 0; transform: translateX(-50%) translateY(-10px); }
      15% { opacity: 1; transform: translateX(-50%) translateY(0); }
      85% { opacity: 1; transform: translateX(-50%) translateY(0); }
      100% { opacity: 0; transform: translateX(-50%) translateY(-10px); }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <a href="index.html" class="back-btn">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
        ëŒì•„ê°€ê¸°
      </a>
      <div class="header-content">
        <div class="header-category">ì‹¬ë¦¬ Â· ì§ì¥</div>
        <h1>ì•„ì´ë””ì–´ ë„ë‘‘ ë™ë£Œ</h1>
        <p>ë„¤ ì•„ì´ë””ì–´ë¥¼ ê°€ë¡œì±ˆ ë™ë£Œ, ì–´ë–»ê²Œ ëŒ€ì‘í• ê¹Œ?</p>
      </div>
    </div>
    
    <div class="progress" id="progress"></div>
    
    <div id="game-screen">
      <div class="scenario-card">
        <div class="stage-label" id="stage-label">Stage 1</div>
        <div class="context" id="context"></div>
        <div class="situation" id="situation"></div>
      </div>
      
      <div class="choices" id="choices"></div>
      
      <div class="result-section" id="result-section">
        <div class="selected-choice">
          <div class="selected-header">ì„ íƒí•œ ë‹µë³€</div>
          <div class="selected-text" id="selected-text"></div>
        </div>
        
        <div class="outcome-card">
          <div class="outcome-label">ìƒëŒ€ë°©ì˜ ë°˜ì‘</div>
          <div class="outcome-text" id="outcome-text"></div>
        </div>
        
        <div class="principle-card">
          <div class="principle-header">
            <span class="principle-icon">ğŸ’¡</span>
            <span class="principle-label">ë°œê²¬í•œ ì›ì¹™</span>
          </div>
          <div class="principle-name" id="principle-name"></div>
          <div class="principle-explanation" id="principle-explanation"></div>
        </div>

        <div class="evaluation-card" id="evaluation-card">
          <div class="evaluation-icon" id="evaluation-icon">âš ï¸</div>
          <div class="evaluation-text" id="evaluation-text"></div>
        </div>

        <div class="other-choices-section">
          <button class="other-choices-toggle" id="other-toggle">
            <span>ë‹¤ë¥¸ ì„ íƒì€?</span>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="6 9 12 15 18 9"/>
            </svg>
          </button>
          <div class="other-choices-content hidden" id="other-choices-content"></div>
        </div>
        
        <button class="next-btn" id="next-btn">ë‹¤ìŒ ìƒí™©</button>
      </div>
    </div>
    
    <div class="final-screen" id="final-screen">
      <div class="clear-card">
        <div class="clear-icon">ğŸ¯</div>
        <div class="clear-title">ì‹œë®¬ë ˆì´ì…˜ ì™„ë£Œ!</div>
        <div class="clear-subtitle">ì•„ì´ë””ì–´ ë„ë‘‘ ë™ë£Œ ìƒí™©ì„ í´ë¦¬ì–´í–ˆìŠµë‹ˆë‹¤</div>
        <div class="clear-exp">+30 EXP íšë“!</div>
      </div>

      <div class="principles-collected">
        <div class="principles-title">ğŸ”“ ë°œê²¬í•œ ì›ì¹™ë“¤</div>
        <div id="principles-list"></div>
      </div>

      <div class="share-section">
        <div class="share-label">ì¹œêµ¬ì—ê²Œ ê³µìœ í•˜ê¸°</div>
        <div class="share-buttons">
          <button class="share-btn" id="native-share-btn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
              <polyline points="16 6 12 2 8 6"/>
              <line x1="12" y1="2" x2="12" y2="15"/>
            </svg>
            ê³µìœ í•˜ê¸°
          </button>
          <button class="share-btn" id="copy-btn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
            </svg>
            ë§í¬ ë³µì‚¬
          </button>
        </div>
      </div>

      <div class="action-buttons">
        <a href="index.html" class="home-btn">íƒí—˜ ì§€ë„ë¡œ ëŒì•„ê°€ê¸°</a>
        <button class="restart-btn" id="restart-btn">ë‹¤ì‹œ í•´ë³´ê¸°</button>
        <button class="install-btn hidden" id="installBtn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="7 10 12 15 17 10"/>
            <line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
          ì•±ìœ¼ë¡œ ì„¤ì¹˜í•˜ê³  ê³„ì† íƒí—˜í•˜ê¸°
        </button>
      </div>

      <div class="promo-section">
        <div class="eclipse-section">
          <div class="eclipse-section-title">ì´í´ë¦½ìŠ¤ ë” ì•Œì•„ë³´ê¸°</div>
          <a href="https://www.youtube.com/@Eclipse-g4e" target="_blank" class="youtube-btn">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814z"/>
              <path fill="#fff" d="M9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
            </svg>
            ìœ íŠœë¸Œ ì±„ë„
          </a>
        </div>

        <div class="books-section">
          <div class="books-section-title">ì´í´ë¦½ìŠ¤ì˜ ì±…</div>
          <div class="books-grid">
            <a href="https://product.kyobobook.co.kr/detail/S000214938953" target="_blank" class="book-item">
              <img src="book-philosophy.png" alt="í›”ì¹œ ì² í•™ í¸">
              <div class="book-item-title">í›”ì¹œ ì² í•™ í¸</div>
            </a>
            <a href="https://product.kyobobook.co.kr/detail/S000214938954" target="_blank" class="book-item">
              <img src="book-psychology.png" alt="í›”ì¹œ ì‹¬ë¦¬í•™ í¸">
              <div class="book-item-title">í›”ì¹œ ì‹¬ë¦¬í•™ í¸</div>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const SITE_URL = 'https://eclipse-mindlab.github.io/mindgame/';
    const STORAGE_KEY = 'eclipse_mindlab_profile';
    const SIM_ID = 'idea_thief';

    // ì‹œë‚˜ë¦¬ì˜¤ ë°ì´í„° - ë©€í‹°ìŠ¤í…Œì´ì§€
    const stages = [
      {
        id: 1,
        context: "íŒ€ íšŒì˜ê°€ ë§‰ ëë‚¬ë‹¤. ë„¤ê°€ ì§€ë‚œì£¼ì— ê°œì¸ì ìœ¼ë¡œ ì–˜ê¸°í–ˆë˜ ì•„ì´ë””ì–´ë¥¼ ë™ë£Œê°€ ìê¸° ê²ƒì²˜ëŸ¼ ë°œí‘œí–ˆë‹¤. ë‹¤ë¥¸ íŒ€ì›ë“¤ì€ \"ì˜¤ ì¢‹ì€ë°?\" ë°˜ì‘ì´ë‹¤. íšŒì˜ì‹¤ì— ë‘˜ë§Œ ë‚¨ì•˜ë‹¤.",
        situation: "ë™ë£Œê°€ ë…¸íŠ¸ë¶ì„ ì •ë¦¬í•˜ë©° ìë¦¬ì—ì„œ ì¼ì–´ë‚˜ë ¤ í•œë‹¤. ë­ë¼ê³  í• ê¹Œ?",
        choices: [
          {
            text: "\"ì ê¹, ì•„ê¹Œ ê·¸ ì•„ì´ë””ì–´ ë§ì¸ë°. ê·¸ê±° ë‚´ê°€ ì €ë²ˆì— ë§í•œ ê±´ë°?\"",
            outcome: "ë™ë£Œê°€ ì†ì„ ë©ˆì¶”ê³  ëŒì•„ë³¸ë‹¤. \"ì–´... ê·¸ë¬ë‚˜? ë¹„ìŠ·í•œ ìƒê°ì„ í•œ ê²ƒ ê°™ì€ë°.\" ì• ë§¤í•˜ê²Œ ì›ƒìœ¼ë©° ìƒí™©ì„ í”¼í•˜ë ¤ í•œë‹¤.",
            principle: "ì§ì ‘ ëŒ€ë©´",
            principleDesc: "ë¬¸ì œë¥¼ ë°”ë¡œ ì§šëŠ” ê²ƒ. ëª…í™•í•˜ì§€ë§Œ, ìƒëŒ€ê°€ ë°©ì–´ ëª¨ë“œë¡œ ë“¤ì–´ê°ˆ ìˆ˜ ìˆë‹¤.",
            evaluation: "neutral",
            evalText: "ë¬¸ì œëŠ” í…Œì´ë¸”ì— ì˜¬ë ¸ì§€ë§Œ, ìƒëŒ€ê°€ ì¸ì •í•˜ì§€ ì•Šê³  ë¹ ì ¸ë‚˜ê°€ë ¤ í•œë‹¤. ë‹¤ìŒ ìˆ˜ê°€ ì¤‘ìš”í•˜ë‹¤.",
            nextStage: "direct_path"
          },
          {
            text: "\"ë°œí‘œ ì˜ ë“¤ì—ˆì–´. ê·¼ë° ê·¸ê±° ìš°ë¦¬ ì €ë²ˆì— ì–˜ê¸°í•œ ê±°ë‘ ë¹„ìŠ·í•˜ë”ë¼?\"",
            outcome: "ë™ë£Œê°€ ì ì‹œ ë©ˆì¹«í•œë‹¤. \"...ê·¸ë¬ë‚˜?\" ëª©ì†Œë¦¬ê°€ ì‘ì•„ì§„ë‹¤. ë­”ê°€ ì°”ë¦¬ëŠ” í‘œì •.",
            principle: "ì§ˆë¬¸í˜• ì••ë°•",
            principleDesc: "ë‹¨ì • ëŒ€ì‹  ì§ˆë¬¸ìœ¼ë¡œ ìƒëŒ€ê°€ ìŠ¤ìŠ¤ë¡œ ì¸ì •í•˜ê²Œ ë§Œë“ ë‹¤. ê³µê²©ì„±ì„ ë‚®ì¶”ë©´ì„œ í•µì‹¬ì„ ì°Œë¥¸ë‹¤.",
            evaluation: "positive",
            evalText: "ìƒëŒ€ê°€ ìŠ¤ìŠ¤ë¡œ ë¶ˆí¸í•´í•˜ê¸° ì‹œì‘í–ˆë‹¤. ë‹¹ì‹ ì´ ì•Œê³  ìˆë‹¤ëŠ” ê±¸ ì¸ì‹ì‹œì¼°ë‹¤.",
            nextStage: "question_path"
          },
          {
            text: "(ì¼ë‹¨ ì•„ë¬´ ë§ ì•ˆ í•œë‹¤. ì§€ì¼œë³´ì.)",
            outcome: "ë™ë£Œê°€ \"ìˆ˜ê³ ~\" í•˜ê³  ë‚˜ê°€ë²„ë¦°ë‹¤. ì•„ë¬´ ì¼ë„ ì—†ì—ˆë‹¤ëŠ” ë“¯ì´.",
            principle: "ê´€ë§",
            principleDesc: "ìƒí™©ì„ ì§€ì¼œë³´ë©° ì •ë³´ë¥¼ ëª¨ì€ë‹¤. í•˜ì§€ë§Œ íƒ€ì´ë°ì„ ë†“ì¹˜ë©´ ë¬¸ì œ ì œê¸°ê°€ ì–´ë ¤ì›Œì§„ë‹¤.",
            evaluation: "negative",
            evalText: "ê¸°íšŒë¥¼ ë†“ì³¤ë‹¤. ì‹œê°„ì´ ì§€ë‚ ìˆ˜ë¡ \"ê·¸ë•Œ ì™œ ë§ ì•ˆ í–ˆì–´?\"ê°€ ëœë‹¤.",
            nextStage: "passive_path"
          }
        ]
      },
      
      // Stage 2 - ì§ì ‘ ëŒ€ë©´ ê²½ë¡œ
      {
        id: "direct_path",
        context: "ë™ë£Œê°€ \"ë¹„ìŠ·í•œ ìƒê°ì„ í•œ ê²ƒ ê°™ì€ë°\"ë¼ë©° ì• ë§¤í•˜ê²Œ ë„˜ê¸°ë ¤ í•œë‹¤. ì•„ì§ íšŒì˜ì‹¤ ë¬¸ ì•ì´ë‹¤.",
        situation: "ìƒëŒ€ê°€ ë„ë§ê°€ë ¤ í•œë‹¤. ì–´ë–»ê²Œ í• ê¹Œ?",
        choices: [
          {
            text: "\"ë¹„ìŠ·í•œ ê²Œ ì•„ë‹ˆë¼ ë˜‘ê°™ì•„. ì €ë²ˆ ì£¼ í™”ìš”ì¼ì— ë‚´ê°€ ë§í•œ ê±°ì–ì•„.\"",
            outcome: "ë™ë£Œ í‘œì •ì´ êµ³ëŠ”ë‹¤. \"...ì•Œì•˜ì–´. ë¯¸ì•ˆ.\" ì§§ê²Œ ì‚¬ê³¼í•˜ê³  ë¹ ë¥´ê²Œ ë‚˜ê°„ë‹¤. ê´€ê³„ëŠ” ëƒ‰ë­í•´ì¡Œì§€ë§Œ, ì ì–´ë„ ì¸ì •ì€ ë°›ì•˜ë‹¤.",
            principle: "ì‚¬ì‹¤ ê³ ì •",
            principleDesc: "êµ¬ì²´ì ì¸ ì‹œì ì„ ì–¸ê¸‰í•˜ë©´ ë¶€ì •í•˜ê¸° ì–´ë ¤ì›Œì§„ë‹¤. ëª¨í˜¸í•¨ì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.",
            evaluation: "positive",
            evalText: "ëª…í™•í•˜ê²Œ ì§šì—ˆë‹¤. ìƒëŒ€ëŠ” ì¸ì •í•  ìˆ˜ë°–ì— ì—†ì—ˆë‹¤. ë‹¤ë§Œ ê´€ê³„ ë¹„ìš©ì´ ìˆë‹¤.",
            nextStage: "stage3_confronted"
          },
          {
            text: "\"ê·¸ë˜? ê·¸ëŸ¼ ë‹¤ìŒì— ê°™ì´ ë°œí‘œí•˜ì. ë‚´ê°€ ì›ë˜ ìƒê°í•œ ë¶€ë¶„ ë” ìˆì–´ì„œ.\"",
            outcome: "ë™ë£Œê°€ ë‹¹í™©í•œë‹¤. \"ì–´... ê·¸ë˜, ê·¸ëŸ¬ì.\" ë¹šì§„ í‘œì •. ë‹¤ìŒ ë¯¸íŒ…ì—ì„œ ë„¤ ì´ë¦„ì„ ë¨¼ì € ì–¸ê¸‰í•˜ê¸° ì‹œì‘í•œë‹¤.",
            principle: "ì „ëµì  ê´€ìš©",
            principleDesc: "ë‹¹ì¥ì˜ ìŠ¹ë¦¬ ëŒ€ì‹  ì¥ê¸°ì  ì˜í–¥ë ¥ì„ ì„ íƒí•œë‹¤. ìƒëŒ€ì—ê²Œ ë¹šì„ ì§€ê²Œ ë§Œë“ ë‹¤.",
            evaluation: "positive",
            evalText: "ì‹¸ìš°ì§€ ì•Šê³  ì´ê²¼ë‹¤. ìƒëŒ€ëŠ” ë¹šì¡Œë‹¤ëŠ” ê±¸ ì•Œê³ , ì´í›„ í–‰ë™ì´ ë‹¬ë¼ì§„ë‹¤.",
            nextStage: "stage3_strategic"
          },
          {
            text: "\"...ì•Œì•˜ì–´.\" (ì¼ë‹¨ ë„˜ì–´ê°„ë‹¤)",
            outcome: "ë™ë£Œê°€ ì•ˆë„í•˜ë©° ë‚˜ê°„ë‹¤. ë‹¹ì‹ ì€ í˜¼ì íšŒì˜ì‹¤ì— ë‚¨ì•„ ì”ì“¸í•¨ì„ ì‚¼í‚¨ë‹¤.",
            principle: "ì² íšŒ",
            principleDesc: "ë¬¸ì œë¥¼ ì œê¸°í–ˆë‹¤ê°€ ê±°ë‘ëŠ” ê²ƒ. ìƒëŒ€ëŠ” 'ë°€ì–´ë„ ë˜ëŠ” ì‚¬ëŒ'ìœ¼ë¡œ í•™ìŠµí•œë‹¤.",
            evaluation: "negative",
            evalText: "ì´ë¯¸ êº¼ë‚¸ ë§ì„ ì‚¼ì¼°ë‹¤. ì•ìœ¼ë¡œ ì´ ì‚¬ëŒì€ ë‹¹ì‹ ì„ ë” ë§Œë§Œí•˜ê²Œ ë³¼ ê²ƒì´ë‹¤.",
            nextStage: "stage3_backed_down"
          }
        ]
      },
      
      // Stage 2 - ì§ˆë¬¸í˜• ì••ë°• ê²½ë¡œ
      {
        id: "question_path",
        context: "ë™ë£Œê°€ ì°”ë¦¬ëŠ” í‘œì •ì´ë‹¤. \"...ê·¸ë¬ë‚˜?\"ë¼ë©° ëª©ì†Œë¦¬ê°€ ì‘ì•„ì¡Œë‹¤. ë­”ê°€ ì¸ì •í•˜ëŠ” ë¶„ìœ„ê¸°.",
        situation: "ìƒëŒ€ê°€ ì•½ê°„ ë¬´ë„ˆì¡Œë‹¤. ì–´ë–»ê²Œ ë§ˆë¬´ë¦¬í• ê¹Œ?",
        choices: [
          {
            text: "\"ì‘, ì €ë²ˆ ì£¼ì— ë‚´ê°€ ë§í•œ ê±´ë°. ë­ ê´œì°®ì•„, ë‹¤ìŒì—” ê°™ì´ í•˜ì.\"",
            outcome: "ë™ë£Œê°€ ê³ ë§™ë‹¤ëŠ” ë“¯ ê³ ê°œë¥¼ ë„ë•ì¸ë‹¤. \"...ë¯¸ì•ˆ, ë‹¤ìŒì—” ê¼­ ê°™ì´ í•˜ì.\" ì§„ì‹¬ìœ¼ë¡œ ë¯¸ì•ˆí•´í•˜ëŠ” ê²ƒ ê°™ë‹¤.",
            principle: "ê´€ìš© + ë°©í–¥ ì œì‹œ",
            principleDesc: "ì˜ëª»ì„ ì¸ì •ë°›ì€ í›„ ê´€ê³„ë¥¼ ë³µì›í•  ê¸¸ì„ ì—´ì–´ì¤€ë‹¤. ìƒëŒ€ì—ê²Œ ëª…ì˜ˆë¡­ê²Œ ë¬¼ëŸ¬ë‚  ê¸°íšŒë¥¼ ì¤€ë‹¤.",
            evaluation: "positive",
            evalText: "ì™„ë²½í•œ ë§ˆë¬´ë¦¬. ë¬¸ì œë¥¼ ì§šìœ¼ë©´ì„œë„ ê´€ê³„ë¥¼ ì‚´ë ¸ë‹¤. ìƒëŒ€ëŠ” ë¹šì§„ ë§ˆìŒìœ¼ë¡œ ë‹¬ë¼ì§„ë‹¤.",
            nextStage: "stage3_graceful"
          },
          {
            text: "\"ê·¸ë˜ì„œ ì•ìœ¼ë¡œëŠ” ë¨¼ì € ì–˜ê¸°í•´ì¤¬ìœ¼ë©´ ì¢‹ê² ì–´.\"",
            outcome: "ë™ë£Œê°€ \"ì•Œì•˜ì–´...\"ë¼ê³  í•œë‹¤. ë¶„ìœ„ê¸°ê°€ ì¢€ ë¬´ê²ì§€ë§Œ, ëª…í™•í•œ ê²½ê³„ê°€ ì„¸ì›Œì¡Œë‹¤.",
            principle: "ê²½ê³„ ì„¤ì •",
            principleDesc: "ì•ìœ¼ë¡œì˜ í–‰ë™ ê·œì¹™ì„ ëª…ì‹œí•œë‹¤. ê´€ê³„ë³´ë‹¤ ì›ì¹™ì„ ìš°ì„ í•œë‹¤.",
            evaluation: "neutral",
            evalText: "ê²½ê³„ëŠ” í™•ì‹¤íˆ ì„¸ì› ë‹¤. í•˜ì§€ë§Œ ê´€ê³„ê°€ ì‚´ì§ ê²½ì§ë  ìˆ˜ ìˆë‹¤.",
            nextStage: "stage3_boundary"
          },
          {
            text: "\"ë‹¤ìŒì—” ì¡°ì‹¬í•´.\" (ë‹¨í˜¸í•˜ê²Œ ëŠëŠ”ë‹¤)",
            outcome: "ë™ë£Œê°€ ì›€ì°”í•œë‹¤. \"...ì•Œì•˜ì–´.\" ë¹ ë¥´ê²Œ ë‚˜ê°€ë²„ë¦°ë‹¤. ì‚¬ê³¼ëŠ” ëª» ë°›ì•˜ì§€ë§Œ ê¸´ì¥ì€ ì „ë‹¬ëë‹¤.",
            principle: "ê²½ê³ ",
            principleDesc: "ëª…í™•í•œ ë¶ˆì¾Œê° ì „ë‹¬. íš¨ê³¼ì ì´ì§€ë§Œ, ê´€ê³„ê°€ ì ëŒ€ì ìœ¼ë¡œ ë³€í•  ìˆ˜ ìˆë‹¤.",
            evaluation: "neutral",
            evalText: "ìƒëŒ€ëŠ” ê¸´ì¥í–ˆì§€ë§Œ, ì‚¬ê³¼ ëŒ€ì‹  íšŒí”¼ë¥¼ ì„ íƒí–ˆë‹¤. ê°ˆë“±ì´ ì ë³µí–ˆì„ ìˆ˜ ìˆë‹¤.",
            nextStage: "stage3_warning"
          }
        ]
      },
      
      // Stage 2 - ê´€ë§ ê²½ë¡œ
      {
        id: "passive_path",
        context: "ë™ë£Œê°€ ê·¸ëƒ¥ ë‚˜ê°€ë²„ë ¸ë‹¤. ì¼ì£¼ì¼ì´ ì§€ë‚¬ë‹¤. íŒ€ì¥ì´ ê·¸ ì•„ì´ë””ì–´ë¡œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ìê³  í•œë‹¤. ë‹´ë‹¹ìë¡œ ê·¸ ë™ë£Œ ì´ë¦„ì´ ì˜¬ë¼ê°€ ìˆë‹¤.",
        situation: "ë¯¸íŒ…ì—ì„œ ë‹´ë‹¹ì ì´ë¦„ì´ ë¶ˆë ¸ë‹¤. ì–´ë–»ê²Œ í• ê¹Œ?",
        choices: [
          {
            text: "\"ì €ë„ ê·¸ ì•„ì´ë””ì–´ì— ê¸°ì—¬í•œ ë¶€ë¶„ì´ ìˆì–´ì„œ, ê°™ì´ ì°¸ì—¬í•˜ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.\"",
            outcome: "íŒ€ì¥ì´ \"ì˜¤? ê·¸ë˜ìš”?\" í•œë‹¤. ë™ë£Œê°€ ì‚´ì§ ê¸´ì¥í•œ í‘œì •. \"ë„¤, ê°™ì´ í•˜ì£ .\"ë¼ê³  í•  ìˆ˜ë°–ì— ì—†ë‹¤.",
            principle: "ê³µê°œì  ê°œì…",
            principleDesc: "íŒ€ ì•ì—ì„œ ìì—°ìŠ¤ëŸ½ê²Œ ì§€ë¶„ì„ ì£¼ì¥í•œë‹¤. ì§ì ‘ ëŒ€ë¦½ ì—†ì´ ìë¦¬ë¥¼ í™•ë³´í•œë‹¤.",
            evaluation: "positive",
            evalText: "ëŠ¦ì—ˆì§€ë§Œ ìë¦¬ë¥¼ ë§Œë“¤ì—ˆë‹¤. ê³µê°œ ì„ìƒì—ì„œëŠ” ê±°ì ˆí•˜ê¸° ì–´ë µë‹¤.",
            nextStage: "stage3_recovered"
          },
          {
            text: "(ë™ë£Œì—ê²Œ ë”°ë¡œ) \"ì €ë²ˆì— ê·¸ ì•„ì´ë””ì–´, ë‚˜ë„ ë‚€ ê±° íŒ€ì¥ë‹˜ê»˜ ë§í•´ë„ ë ê¹Œ?\"",
            outcome: "ë™ë£Œê°€ ë‹¹í™©í•œë‹¤. \"ì–´... ê·¸ë˜, ë§í•´ë„ ë¼.\" ì°œì°œí•œ í‘œì •ì´ì§€ë§Œ ê±°ì ˆì€ ëª» í•œë‹¤.",
            principle: "ì‚¬ì „ í—ˆë½",
            principleDesc: "ê³µê°œí•˜ê¸° ì „ì— ìƒëŒ€ì—ê²Œ ë¨¼ì € ë§í•œë‹¤. ê´€ê³„ë¥¼ ìœ ì§€í•˜ë©´ì„œ ì§€ë¶„ì„ í™•ë³´í•˜ë ¤ëŠ” ì‹œë„.",
            evaluation: "neutral",
            evalText: "í—ˆë½ì€ ë°›ì•˜ì§€ë§Œ, ì™œ í—ˆë½ì„ êµ¬í•´ì•¼ í•˜ë‚˜? ì›ë˜ ë„¤ ì•„ì´ë””ì–´ì¸ë°.",
            nextStage: "stage3_permission"
          },
          {
            text: "(ê°€ë§Œíˆ ìˆëŠ”ë‹¤. ì´ë¯¸ ëŠ¦ì—ˆë‹¤.)",
            outcome: "í”„ë¡œì íŠ¸ëŠ” ê·¸ ë™ë£Œ ì£¼ë„ë¡œ ì§„í–‰ëœë‹¤. ëª‡ ë‹¬ í›„ ì„±ê³¼ ë°œí‘œì—ì„œ ë™ë£Œê°€ ì¹­ì°¬ë°›ëŠ”ë‹¤. ë‹¹ì‹ ì€ ì•„ë¬´ë„ ëª¨ë¥´ëŠ” ë¶„í•¨ì„ ì‚¼í‚¨ë‹¤.",
            principle: "í¬ê¸°",
            principleDesc: "ì‹¸ìš¸ íƒ€ì´ë°ì„ ë†“ì¹˜ë©´ ì˜ì›íˆ ëª» ì‹¸ìš´ë‹¤. ë‹¹ì¥ì€ í¸í•˜ì§€ë§Œ, ì¥ê¸°ì ìœ¼ë¡œ ì†í•´ê°€ ëˆ„ì ëœë‹¤.",
            evaluation: "negative",
            evalText: "ë‚´ ì•„ì´ë””ì–´ë¡œ ë‹¤ë¥¸ ì‚¬ëŒì´ ì¸ì •ë°›ì•˜ë‹¤. ë‹¤ìŒì—ë„ ê°™ì€ ì¼ì´ ë°˜ë³µë  ìˆ˜ ìˆë‹¤.",
            nextStage: "stage3_gave_up"
          }
        ]
      },
      
      // Stage 3 - ê° ê²½ë¡œë³„ ë§ˆë¬´ë¦¬
      {
        id: "stage3_confronted",
        context: "ì§ì ‘ ëŒ€ë©´ í›„ ì¼ì£¼ì¼. ë™ë£Œì™€ì˜ ê´€ê³„ëŠ” ì„œë¨¹í•´ì¡Œì§€ë§Œ, íŒ€ì—ì„œ ì•„ì´ë””ì–´ ê´€ë ¨ ë…¼ì˜í•  ë•Œ ë„¤ ì´ë¦„ì´ ì–¸ê¸‰ë˜ê¸° ì‹œì‘í–ˆë‹¤.",
        situation: "ë‹¤ìŒ í”„ë¡œì íŠ¸ ë¯¸íŒ…ì—ì„œ ë™ë£Œì™€ ë§ˆì£¼ì³¤ë‹¤. ë¶„ìœ„ê¸°ê°€ ì–´ìƒ‰í•˜ë‹¤.",
        choices: [
          {
            text: "\"ì €ë²ˆ ê±´ ëê³ , ì´ë²ˆ í”„ë¡œì íŠ¸ ì˜í•´ë³´ì.\"",
            outcome: "ë™ë£Œê°€ \"...ê·¸ë˜, ì˜í•˜ì.\" í•œë‹¤. ì–´ìƒ‰í•˜ì§€ë§Œ í”„ë¡œí˜ì…”ë„í•˜ê²Œ ë„˜ì–´ê°„ë‹¤. ì‹œê°„ì´ ì§€ë‚˜ë©´ì„œ ê´€ê³„ê°€ ì¡°ê¸ˆì”© íšŒë³µëœë‹¤.",
            principle: "ì„  ê¸‹ê³  ë¦¬ì…‹",
            principleDesc: "ê³¼ê±°ë¥¼ ì •ë¦¬í•˜ê³  ìƒˆ ì¶œë°œì„ ì œì•ˆí•œë‹¤. ê°ˆë“±ì„ ëŒê³  ê°€ì§€ ì•ŠëŠ”ë‹¤.",
            evaluation: "positive",
            evalText: "ê²½ê³„ë¥¼ ì„¸ìš´ í›„ ê´€ê³„ë¥¼ ë³µì›í–ˆë‹¤. ìƒëŒ€ëŠ” ë‹¹ì‹ ì„ í•¨ë¶€ë¡œ ëŒ€í•˜ì§€ ì•Šìœ¼ë©´ì„œë„, ì ì€ ì•„ë‹ˆê²Œ ëë‹¤.",
            nextStage: "end"
          },
          {
            text: "(ë¨¼ì € ë§ ê±¸ì§€ ì•ŠëŠ”ë‹¤. í•„ìš”í•œ ì—…ë¬´ ì–˜ê¸°ë§Œ í•œë‹¤.)",
            outcome: "ì„œë¡œ ì—…ë¬´ì ìœ¼ë¡œë§Œ ëŒ€í•œë‹¤. íŒ€ ë¶„ìœ„ê¸°ê°€ ì‚´ì§ ë¶ˆí¸í•´ì¡Œì§€ë§Œ, ì ì–´ë„ ë‹¹ì‹ ì€ ë§Œë§Œí•œ ì‚¬ëŒì´ ì•„ë‹ˆë‹¤.",
            principle: "ê±°ë¦¬ ìœ ì§€",
            principleDesc: "ê°€ê¹Œì›Œì§€ì§€ ì•Šìœ¼ë©´ì„œ ì ëŒ€í•˜ì§€ë„ ì•ŠëŠ”ë‹¤. í”„ë¡œí˜ì…”ë„í•œ ê±°ë¦¬ë‘ê¸°.",
            evaluation: "neutral",
            evalText: "ê´€ê³„ëŠ” ëƒ‰ë­í•˜ì§€ë§Œ ì‹¤ë¦¬ëŠ” ì±™ê²¼ë‹¤. ì§ì¥ì—ì„œ ëª¨ë“  ì‚¬ëŒê³¼ ì¹œí•  í•„ìš”ëŠ” ì—†ë‹¤.",
            nextStage: "end"
          }
        ]
      },
      
      {
        id: "stage3_strategic",
        context: "\"ê°™ì´ ë°œí‘œí•˜ì\"ê³  í•œ í›„ ì¼ì£¼ì¼. ë™ë£Œê°€ ë‹¤ìŒ ë¯¸íŒ… ì „ì— ë¨¼ì € ì°¾ì•„ì™”ë‹¤.",
        situation: "\"ì €ë²ˆì— ì–˜ê¸°í•œ ê±°, ë„¤ íŒŒíŠ¸ëŠ” ë­ë¡œ í•  ê±°ì•¼?\"",
        choices: [
          {
            text: "\"ë‚´ê°€ ì›ë˜ ìƒê°í–ˆë˜ í•µì‹¬ ì»¨ì…‰ì´ë‘ ì‹¤í–‰ ë°©ì•ˆ ìª½ì„ ë§¡ì„ê²Œ.\"",
            outcome: "ë™ë£Œê°€ ê³ ê°œë¥¼ ë„ë•ì¸ë‹¤. ë°œí‘œì—ì„œ ë‹¹ì‹ ì´ í•µì‹¬ì„ ì„¤ëª…í•˜ê³ , ë™ë£ŒëŠ” ë³´ì¡° ì—­í• ì„ í•œë‹¤. íŒ€ì¥ì´ ë‹¹ì‹ ì„ ì£¼ëª©í•œë‹¤.",
            principle: "ì£¼ë„ê¶Œ í™•ë³´",
            principleDesc: "ê´€ìš©ì„ ë² í’€ì—ˆì§€ë§Œ í•µì‹¬ì€ ì–‘ë³´í•˜ì§€ ì•ŠëŠ”ë‹¤. ë¹šì§„ ì‚¬ëŒì€ ê±°ì ˆí•˜ê¸° ì–´ë µë‹¤.",
            evaluation: "positive",
            evalText: "ì‹¸ìš°ì§€ ì•Šê³  ì›ë˜ ìë¦¬ë¥¼ ì°¾ì•˜ë‹¤. ìƒëŒ€ëŠ” ë³´ì¡° ì—­í• ì— ë§Œì¡±í•´ì•¼ í–ˆë‹¤.",
            nextStage: "end"
          },
          {
            text: "\"ì ë‹¹íˆ ë‚˜ëˆ ì„œ í•˜ì. ë„¤ê°€ ì •í•´ë„ ë¼.\"",
            outcome: "ë™ë£Œê°€ í•µì‹¬ íŒŒíŠ¸ë¥¼ ê°€ì ¸ê°„ë‹¤. ë°œí‘œì—ì„œ ë‹¹ì‹ ì€ ì¡°ì—°ì´ ëœë‹¤. ê´€ìš©ì´ ì†í•´ê°€ ëë‹¤.",
            principle: "ê³¼ì‰ ì–‘ë³´",
            principleDesc: "ê´€ìš©ì—ë„ í•œê³„ê°€ ìˆì–´ì•¼ í•œë‹¤. í•µì‹¬ê¹Œì§€ ì–‘ë³´í•˜ë©´ ê´€ìš©ì´ ì•„ë‹ˆë¼ ì†í•´ë‹¤.",
            evaluation: "negative",
            evalText: "ê¸°íšŒë¥¼ ì¤¬ëŠ”ë° ë” ëºê²¼ë‹¤. ë‹¤ìŒë¶€í„´ ê´€ìš©ì˜ ë²”ìœ„ë¥¼ ì •í•´ì•¼ í•œë‹¤.",
            nextStage: "end"
          }
        ]
      },
      
      {
        id: "stage3_graceful",
        context: "\"ë‹¤ìŒì—” ê°™ì´ í•˜ì\"ê³  ë§ˆë¬´ë¦¬í•œ í›„. ë™ë£Œê°€ ì§„ì‹¬ìœ¼ë¡œ ë¯¸ì•ˆí•´í•˜ëŠ” ê²ƒ ê°™ì•˜ë‹¤. ì¼ì£¼ì¼ í›„, íŒ€ ë¯¸íŒ…ì—ì„œ ê·¸ ì•„ì´ë””ì–´ê°€ ë‹¤ì‹œ ë…¼ì˜ëë‹¤.",
        situation: "íŒ€ì¥ì´ \"ì´ ì•„ì´ë””ì–´ ëˆ„ê°€ ë‚¸ ê±°ì•¼?\"ë¼ê³  ë¬¼ì—ˆë‹¤.",
        choices: [
          {
            text: "(ë™ë£Œë¥¼ ë³¸ë‹¤. ë„¤ê°€ ë§í•˜ë¼ëŠ” ì‹ í˜¸)",
            outcome: "ë™ë£Œê°€ \"ì‚¬ì‹¤ ì´ê±´ ì›ë˜ [ë‹¹ì‹  ì´ë¦„]ì´ ë¨¼ì € ì–˜ê¸°í•œ ê±´ë°, ì œê°€ ì¢€ ë°œì „ì‹œì¼œì„œ...\"ë¼ê³  ë§í•œë‹¤. íŒ€ì¥ì´ ë‹¹ì‹ ì„ ë³¸ë‹¤. \"ì˜¤, ê·¸ë¬ì–´ìš”?\"",
            principle: "ì‹ ë¢° íšŒë³µ í™•ì¸",
            principleDesc: "ê¸°íšŒë¥¼ ì¤¬ì„ ë•Œ ìƒëŒ€ê°€ ì–´ë–»ê²Œ í•˜ëŠ”ì§€ ë³¸ë‹¤. ì§„ì§œ ë°˜ì„±í–ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” í…ŒìŠ¤íŠ¸.",
            evaluation: "positive",
            evalText: "ìƒëŒ€ê°€ ìŠ¤ìŠ¤ë¡œ ë°”ë¡œì¡ì•˜ë‹¤. ë‹¹ì‹ ì˜ ê´€ìš©ì´ íš¨ê³¼ê°€ ìˆì—ˆë‹¤. ì•ìœ¼ë¡œ ì´ ì‚¬ëŒì€ ë‹¹ì‹ ì„ í•¨ë¶€ë¡œ ëŒ€í•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤.",
            nextStage: "end"
          },
          {
            text: "\"ì œê°€ ì²˜ìŒ ì•„ì´ë””ì–´ë¥¼ ëƒˆê³ , [ë™ë£Œ]ê°€ ë°œì „ì‹œì¼œì¤¬ìŠµë‹ˆë‹¤.\"",
            outcome: "ë™ë£Œê°€ ì‚´ì§ ì•ˆë„í•˜ëŠ” í‘œì •. íŒ€ì¥ì´ \"ì¢‹ì€ í˜‘ì—…ì´ë„¤ìš”\"ë¼ê³  í•œë‹¤. ë‘˜ ë‹¤ í¬ë ˆë”§ì„ ë°›ì•˜ë‹¤.",
            principle: "ê³µìœ  í¬ë ˆë”§",
            principleDesc: "ì§€ë¶„ì„ ëª…í™•íˆ í•˜ë©´ì„œë„ ìƒëŒ€ ì²´ë©´ì„ ì„¸ì›Œì¤€ë‹¤. ê´€ê³„ì™€ ì‹¤ë¦¬ ëª¨ë‘ ì±™ê¸´ë‹¤.",
            evaluation: "positive",
            evalText: "ê¹”ë”í•˜ê²Œ ì •ë¦¬í–ˆë‹¤. ë„¤ ì§€ë¶„ë„ ì±™ê¸°ê³ , ìƒëŒ€ë„ ë§ì‹ ë‹¹í•˜ì§€ ì•Šì•˜ë‹¤.",
            nextStage: "end"
          }
        ]
      },
      
      {
        id: "stage3_boundary",
        context: "\"ì•ìœ¼ë¡œëŠ” ë¨¼ì € ì–˜ê¸°í•´ì¤¬ìœ¼ë©´ ì¢‹ê² ì–´\"ë¼ê³  ê²½ê³„ë¥¼ ì„¸ìš´ í›„. ë™ë£Œê°€ ë‹¤ì†Œ ê¸´ì¥ëœ ìƒíƒœë¡œ ì§€ë‚¸ë‹¤.",
        situation: "ë©°ì¹  í›„, ë™ë£Œê°€ ìƒˆ ì•„ì´ë””ì–´ë¥¼ ë“¤ê³  ë¨¼ì € ë‹¹ì‹ ì—ê²Œ ì™”ë‹¤. \"ì´ê±° ì–´ë–»ê²Œ ìƒê°í•´?\"",
        choices: [
          {
            text: "\"ì˜¤, ê´œì°®ì€ë°? ì—¬ê¸°ì— ì´ëŸ° ê²ƒë„ ì¶”ê°€í•˜ë©´ ë” ì¢‹ì„ ê²ƒ ê°™ì•„.\"",
            outcome: "ë™ë£Œê°€ í™˜í•´ì§„ë‹¤. \"ê·¸ë ‡ì§€? ê°™ì´ ë°œí‘œí• ê¹Œ?\" ê²½ê³„ ì´í›„ ê´€ê³„ê°€ ì˜¤íˆë ¤ ê±´ê°•í•´ì¡Œë‹¤.",
            principle: "ê²½ê³„ í›„ í˜‘ë ¥",
            principleDesc: "ì„ ì„ ê¸‹ëŠ”ë‹¤ê³  ê´€ê³„ê°€ ëë‚˜ëŠ” ê²Œ ì•„ë‹ˆë‹¤. ëª…í™•í•œ ê²½ê³„ ìœ„ì— ë” ê±´ê°•í•œ í˜‘ë ¥ì´ ê°€ëŠ¥í•˜ë‹¤.",
            evaluation: "positive",
            evalText: "ê²½ê³„ê°€ íš¨ê³¼ê°€ ìˆì—ˆë‹¤. ìƒëŒ€ê°€ ì´ì œ ë‹¹ì‹ ì„ ì¡´ì¤‘í•˜ë©´ì„œ í˜‘ë ¥í•œë‹¤.",
            nextStage: "end"
          },
          {
            text: "\"ìŒ, ê´œì°®ë„¤. ì•Œì•„ì„œ í•´ë´.\"",
            outcome: "ë™ë£Œê°€ ì‚´ì§ ì‹¤ë§í•œ í‘œì •ìœ¼ë¡œ ê°„ë‹¤. ê²½ê³„ëŠ” ì„¸ì› ì§€ë§Œ, ê´€ê³„ê°€ ì´ì „ë³´ë‹¤ ë©€ì–´ì¡Œë‹¤.",
            principle: "ê±°ë¦¬ ìœ ì§€",
            principleDesc: "ê²½ê³„ í›„ í˜‘ë ¥ê¹Œì§€ ê°€ì§€ ì•Šê³  ê±°ë¦¬ë¥¼ ìœ ì§€í•œë‹¤. ì•ˆì „í•˜ì§€ë§Œ, ê¸°íšŒ ë¹„ìš©ì´ ìˆë‹¤.",
            evaluation: "neutral",
            evalText: "ê²½ê³„ëŠ” ìœ ì§€ë˜ì§€ë§Œ ì‹œë„ˆì§€ëŠ” ì—†ë‹¤. ë‚˜ì˜ì§„ ì•Šì§€ë§Œ ìµœì„ ì€ ì•„ë‹ˆë‹¤.",
            nextStage: "end"
          }
        ]
      },

      {
        id: "stage3_warning",
        context: "\"ë‹¤ìŒì—” ì¡°ì‹¬í•´\"ë¼ê³  ê²½ê³ í•œ í›„. ë™ë£Œê°€ ë‹¹ì‹ ì„ í”¼í•˜ëŠ” ê²ƒ ê°™ë‹¤.",
        situation: "íŒ€ íšŒì‹ì—ì„œ ë™ë£Œì™€ ë§ˆì£¼ì³¤ë‹¤. ì–´ìƒ‰í•œ ë¶„ìœ„ê¸°.",
        choices: [
          {
            text: "\"ë­ ë§ˆì‹¤ë˜? ë‚´ê°€ ì‚´ê²Œ.\"",
            outcome: "ë™ë£Œê°€ ë†€ë¼ë©° \"ì–´... ê³ ë§ˆì›Œ.\" í•œë‹¤. ê¸´ì¥ì´ ì¡°ê¸ˆ í’€ë¦°ë‹¤. ê²½ê³  í›„ í™”í•´ì˜ ì‹ í˜¸.",
            principle: "ê¸´ì¥ ì™„í™”",
            principleDesc: "ê²½ê³ ë¡œ ê¸´ì¥ì„ ë§Œë“¤ì—ˆë‹¤ë©´, ì‘ì€ í˜¸ì˜ë¡œ í’€ì–´ì¤„ ìˆ˜ ìˆë‹¤. ì ìœ¼ë¡œ ë§Œë“¤ í•„ìš”ëŠ” ì—†ë‹¤.",
            evaluation: "positive",
            evalText: "ê²½ê³„ë¥¼ ì„¸ìš´ í›„ ê´€ê³„ë¥¼ ë³µì›í•˜ëŠ” ì œìŠ¤ì²˜. ìƒëŒ€ëŠ” ê¸´ì¥í•˜ë©´ì„œë„ ê³ ë§ˆì›Œí•œë‹¤.",
            nextStage: "end"
          },
          {
            text: "(êµ³ì´ ë§ ê±¸ì§€ ì•ŠëŠ”ë‹¤)",
            outcome: "ì„œë¡œ ì–´ìƒ‰í•˜ê²Œ ì§€ë‚˜ê°„ë‹¤. ì•ìœ¼ë¡œë„ ì—…ë¬´ì ì¸ ê´€ê³„ë§Œ ìœ ì§€ë  ê²ƒ ê°™ë‹¤.",
            principle: "ëƒ‰ì „ ìœ ì§€",
            principleDesc: "êµ³ì´ í™”í•´í•˜ì§€ ì•ŠëŠ”ë‹¤. ì§ì¥ì—ì„œ ëª¨ë“  ê´€ê³„ê°€ ì¢‹ì„ í•„ìš”ëŠ” ì—†ë‹¤.",
            evaluation: "neutral",
            evalText: "ê´€ê³„ëŠ” ëƒ‰ë­í•˜ì§€ë§Œ ë¬¸ì œëŠ” í•´ê²°ëë‹¤. ì´ ì •ë„ë©´ ì¶©ë¶„í•  ìˆ˜ë„ ìˆë‹¤.",
            nextStage: "end"
          }
        ]
      },

      {
        id: "stage3_backed_down",
        context: "ë¬¸ì œë¥¼ ì œê¸°í–ˆë‹¤ê°€ ì² íšŒí•œ í›„. ë™ë£ŒëŠ” ì•„ë¬´ ì¼ ì—†ë‹¤ëŠ” ë“¯ì´ ì§€ë‚¸ë‹¤. ë‹¤ìŒ í”„ë¡œì íŠ¸ì—ì„œ ë˜ ë¹„ìŠ·í•œ ìƒí™©ì´ ìƒê²¼ë‹¤.",
        situation: "ë™ë£Œê°€ ë‹¹ì‹ ì´ ì•„ì´ë””ì–´ íšŒì˜ì—ì„œ ë§í•œ ë‚´ìš©ì„ ë˜ ìê¸° ê²ƒì²˜ëŸ¼ ì •ë¦¬í•´ì„œ ê³µìœ í–ˆë‹¤.",
        choices: [
          {
            text: "\"ì ê¹, ì´ê±° ì•„ê¹Œ ë‚´ê°€ ë§í•œ ê±´ë°?\" (ì´ë²ˆì—” í™•ì‹¤íˆ)",
            outcome: "ë™ë£Œê°€ ë‹¹í™©í•œë‹¤. íŒ€ì›ë“¤ì´ \"ì–´? ê·¸ë¬ì–´?\" í•œë‹¤. ë’¤ëŠ¦ê²Œë¼ë„ ì§šì—ˆë‹¤.",
            principle: "ëŠ¦ì€ ê²½ê³„",
            principleDesc: "ì²˜ìŒì— ëª» ì„¸ìš´ ê²½ê³„ë¥¼ ë‚˜ì¤‘ì—ë¼ë„ ì„¸ìš´ë‹¤. ì™„ë²½í•˜ì§„ ì•Šì§€ë§Œ, ì•ˆ í•˜ëŠ” ê²ƒë³´ë‹¤ ë‚«ë‹¤.",
            evaluation: "neutral",
            evalText: "ëŠ¦ì—ˆì§€ë§Œ ì§šì—ˆë‹¤. ì•ìœ¼ë¡œëŠ” ì´ëŸ° ì¼ì´ ì¤„ì–´ë“¤ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ ì´ë¯¸ ì†í•´ ë³¸ ê±´ ëŒì•„ì˜¤ì§€ ì•ŠëŠ”ë‹¤.",
            nextStage: "end"
          },
          {
            text: "(ë˜ ë„˜ì–´ê°„ë‹¤. ì–´ì°¨í”¼ ì´ë¯¸ ê·¸ëŸ° ê´€ê³„ë‹ˆê¹Œ.)",
            outcome: "íŒ¨í„´ì´ ê³ ì°©ëœë‹¤. ì•ìœ¼ë¡œë„ ì´ ì‚¬ëŒì€ ë‹¹ì‹ ì„ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ëŒ€í•  ê²ƒì´ë‹¤.",
            principle: "íŒ¨í„´ ê³ ì°©",
            principleDesc: "í•œ ë²ˆ ë°€ë¦¬ë©´ ê³„ì† ë°€ë¦°ë‹¤. ê´€ê³„ì—ì„œ í•œ ë²ˆ ì •í•´ì§„ ì—­í• ì€ ë°”ê¾¸ê¸° ì–´ë µë‹¤.",
            evaluation: "negative",
            evalText: "ì†í•´ê°€ ëˆ„ì ëœë‹¤. ì´ ê´€ê³„ì—ì„œ ë‹¹ì‹ ì€ ê³„ì† ì„ì´ ë  ê²ƒì´ë‹¤.",
            nextStage: "end"
          }
        ]
      },

      {
        id: "stage3_recovered",
        context: "ê³µê°œ ì„ìƒì—ì„œ \"ì €ë„ ê¸°ì—¬í•œ ë¶€ë¶„ì´ ìˆë‹¤\"ê³  ë§í•œ í›„. í”„ë¡œì íŠ¸ì— ê³µë™ ì°¸ì—¬í•˜ê²Œ ëë‹¤.",
        situation: "ë™ë£Œì™€ ì²« ë¯¸íŒ…ì„ í•˜ê²Œ ëë‹¤. ë‘˜ì´ì„œ.",
        choices: [
          {
            text: "\"ì €ë²ˆì— ì¢€ ë‹¹í™©í–ˆì„ ìˆ˜ë„ ìˆëŠ”ë°, ê·¸ëƒ¥ ê°™ì´ ì˜í•´ë³´ì.\"",
            outcome: "ë™ë£Œê°€ \"...ì‘, ê·¸ëŸ¬ì.\" í•œë‹¤. ì–´ìƒ‰í•˜ì§€ë§Œ ì„œë¡œ í˜‘ë ¥í•˜ê¸°ë¡œ ì•”ë¬µì  í•©ì˜.",
            principle: "ì‹¤ìš©ì  í™”í•´",
            principleDesc: "ê°ì •ë³´ë‹¤ ê²°ê³¼ë¥¼ ìš°ì„ í•œë‹¤. í•¨ê»˜ ì¼í•´ì•¼ í•˜ë©´ ê´€ê³„ë¥¼ ì •ë¦¬í•˜ê³  ê°€ëŠ” ê²Œ ë‚«ë‹¤.",
            evaluation: "positive",
            evalText: "ëŠ¦ê²Œ ê°œì…í–ˆì§€ë§Œ ìë¦¬ëŠ” ë§Œë“¤ì—ˆë‹¤. ì•ìœ¼ë¡œëŠ” ì²˜ìŒë¶€í„° ì§šëŠ” ê²Œ ì¢‹ê² ë‹¤.",
            nextStage: "end"
          },
          {
            text: "\"ì—­í•  ë¶„ë‹´í•˜ì. ë‚´ê°€ ì´ ë¶€ë¶„, ë„¤ê°€ ì € ë¶€ë¶„.\"",
            outcome: "ë™ë£Œê°€ ê³ ê°œë¥¼ ë„ë•ì¸ë‹¤. ë¹„ì¦ˆë‹ˆìŠ¤ì ìœ¼ë¡œ ì •ë¦¬ëë‹¤. ì¹œí•˜ì§„ ì•Šì§€ë§Œ ì¼ì€ ëœë‹¤.",
            principle: "ì—…ë¬´ ë¶„ë¦¬",
            principleDesc: "ê´€ê³„ íšŒë³µ ì—†ì´ ì—…ë¬´ë§Œ ë¶„ë¦¬í•œë‹¤. íš¨ìœ¨ì ì´ì§€ë§Œ ì‹œë„ˆì§€ëŠ” ê¸°ëŒ€í•˜ê¸° ì–´ë µë‹¤.",
            evaluation: "neutral",
            evalText: "ì¼ì€ ë˜ì§€ë§Œ í˜‘ì—…ì˜ ì‹œë„ˆì§€ëŠ” ì—†ë‹¤. ê·¸ë˜ë„ í˜¼ì ì†í•´ ë³´ëŠ” ê²ƒë³´ë‹¨ ë‚«ë‹¤.",
            nextStage: "end"
          }
        ]
      },

      {
        id: "stage3_permission",
        context: "ë™ë£Œì—ê²Œ \"íŒ€ì¥ë‹˜ê»˜ ë§í•´ë„ ë ê¹Œ?\" í—ˆë½ì„ êµ¬í•œ í›„. ë™ë£Œê°€ ì–´ìƒ‰í•˜ê²Œ í—ˆë½í–ˆë‹¤.",
        situation: "íŒ€ì¥ì—ê²Œ ë§í•˜ë ¤ëŠ”ë°, ì–´ë–»ê²Œ ë§í• ê¹Œ?",
        choices: [
          {
            text: "\"ê·¸ ì•„ì´ë””ì–´, ì‚¬ì‹¤ ì œê°€ ë¨¼ì € ìƒê°í•œ ê±´ë° [ë™ë£Œ]ê°€ ë°œí‘œí•œ ê±°ì˜ˆìš”.\"",
            outcome: "íŒ€ì¥ì´ \"ì•„ ê·¸ë˜ìš”?\" í•œë‹¤. ë™ë£Œê°€ ì‚´ì§ êµ³ì€ í‘œì •. ì§€ë¶„ì€ ì±™ê²¼ì§€ë§Œ ë­”ê°€ ì°ì°í•˜ë‹¤.",
            principle: "ë’¤ëŠ¦ì€ ê³ ë°œ",
            principleDesc: "ì‚¬ì‹¤ì„ ë§í–ˆì§€ë§Œ, íƒ€ì´ë°ì´ ëŠ¦ìœ¼ë©´ 'ë’¤ì—ì„œ ë§í•˜ëŠ” ì‚¬ëŒ'ì´ ë  ìˆ˜ ìˆë‹¤.",
            evaluation: "neutral",
            evalText: "ì§€ë¶„ì€ ì±™ê²¼ì§€ë§Œ, ì²˜ìŒì— ë°”ë¡œ ë§í–ˆì–´ì•¼ í–ˆë‹¤. ì¸ìƒì´ ì¢‹ì§„ ì•Šë‹¤.",
            nextStage: "end"
          },
          {
            text: "\"ê·¸ ì•„ì´ë””ì–´ ê´€ë ¨í•´ì„œ ì œê°€ ì¶”ê°€ë¡œ ìƒê°í•œ ê²Œ ìˆì–´ì„œ, ì°¸ì—¬í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤.\"",
            outcome: "íŒ€ì¥ì´ \"ì¢‹ì•„ìš”, ê°™ì´ í•´ë³´ì„¸ìš”.\" í•œë‹¤. ëˆ„ê°€ ë¨¼ì €ëƒë³´ë‹¤ ì•ìœ¼ë¡œ ë­˜ í• ì§€ì— ì§‘ì¤‘í–ˆë‹¤.",
            principle: "ë¯¸ë˜ ì§€í–¥",
            principleDesc: "ê³¼ê±°ì˜ ì˜ëª»ë³´ë‹¤ ë¯¸ë˜ì˜ ê¸°íšŒì— ì§‘ì¤‘í•œë‹¤. ì‹œê°„ì„ ë˜ëŒë¦´ ìˆœ ì—†ë‹¤.",
            evaluation: "positive",
            evalText: "ê¹”ë”í•˜ê²Œ ìë¦¬ë¥¼ ë§Œë“¤ì—ˆë‹¤. ê³¼ê±°ëŠ” ë¬»ê³  ì•ìœ¼ë¡œ ë‚˜ì•„ê°„ë‹¤.",
            nextStage: "end"
          }
        ]
      },

      {
        id: "stage3_gave_up",
        context: "ê°€ë§Œíˆ ìˆì—ˆë‹¤. í”„ë¡œì íŠ¸ëŠ” ë™ë£Œ ì£¼ë„ë¡œ ëë‚¬ê³ , ë™ë£Œê°€ ì¢‹ì€ í‰ê°€ë¥¼ ë°›ì•˜ë‹¤.",
        situation: "ì„±ê³¼ ë°œí‘œíšŒì—ì„œ íŒ€ì¥ì´ ë™ë£Œë¥¼ ì¹­ì°¬í•œë‹¤. \"ì´ë²ˆ ì•„ì´ë””ì–´ ì •ë§ ì¢‹ì•˜ì–´ìš”.\" ë‹¹ì‹ ì€ ì˜†ì—ì„œ ë“£ê³  ìˆë‹¤.",
        choices: [
          {
            text: "(ë°•ìˆ˜ ì¹œë‹¤. ì–´ì©” ìˆ˜ ì—†ë‹¤.)",
            outcome: "ì†ì´ ì“°ë¦¬ì§€ë§Œ ì›ƒìœ¼ë©° ë°•ìˆ˜ ì¹œë‹¤. ë™ë£ŒëŠ” ë‹¹ì‹ ì„ ì ê¹ ë³¸ë‹¤. ë‘˜ ë‹¤ ì§„ì‹¤ì„ ì•Œì§€ë§Œ, ì•„ë¬´ë„ ëª¨ë¥¸ë‹¤.",
            principle: "ì‚¼í‚¨ ë¶„ë…¸",
            principleDesc: "í‘œí˜„í•˜ì§€ ëª»í•œ ê°ì •ì€ ì‚¬ë¼ì§€ì§€ ì•ŠëŠ”ë‹¤. ë‚´ë©´ì— ìŒ“ì´ê±°ë‚˜, ë‹¤ë¥¸ í˜•íƒœë¡œ ë‚˜ì˜¨ë‹¤.",
            evaluation: "negative",
            evalText: "ì§€ê¸ˆ ì´ ìˆœê°„ì„ ê¸°ì–µí•´ë‘ì. ë‹¤ìŒì—” ì²˜ìŒë¶€í„° ì§šì–´ì•¼ í•œë‹¤.",
            nextStage: "end"
          },
          {
            text: "(ë‹¤ìŒì—” ë‹¤ë¥´ê²Œ í•´ì•¼ì§€, ë¼ê³  ë‹¤ì§í•œë‹¤.)",
            outcome: "ì“´ì›ƒìŒì„ ì§“ëŠ”ë‹¤. ìˆ˜ì—…ë£Œë¥¼ ëƒˆë‹¤ê³  ìƒê°í•˜ì. ë¹„ì‹¼ ìˆ˜ì—…ë£Œì˜€ì§€ë§Œ.",
            principle: "ê°’ë¹„ì‹¼ êµí›ˆ",
            principleDesc: "ì‹¤íŒ¨ì—ì„œ ë°°ìš°ëŠ” ê±´ ì¢‹ì§€ë§Œ, ëŒ€ê°€ê°€ í¬ë©´ ì†í•´ë‹¤. ë¯¸ë¦¬ ë°°ìš°ëŠ” ê²Œ ë‚«ë‹¤.",
            evaluation: "neutral",
            evalText: "êµí›ˆì€ ì–»ì—ˆë‹¤. í•˜ì§€ë§Œ ì´ ì•„ì´ë””ì–´ë¡œ ì–»ì—ˆì„ ê¸°íšŒëŠ” ì˜ì˜ ëŒì•„ì˜¤ì§€ ì•ŠëŠ”ë‹¤.",
            nextStage: "end"
          }
        ]
      }
    ];

    let currentStageId = 1;
    let collectedPrinciples = [];
    let stageHistory = [];

    function getStageById(id) {
      return stages.find(s => s.id === id);
    }

    function init() {
      renderProgress();
      renderStage();
      
      document.getElementById('next-btn').addEventListener('click', nextStage);
      document.getElementById('restart-btn').addEventListener('click', restart);
      document.getElementById('native-share-btn').addEventListener('click', nativeShare);
      document.getElementById('copy-btn').addEventListener('click', copyLink);
      document.getElementById('other-toggle').addEventListener('click', toggleOtherChoices);
    }

    function toggleOtherChoices() {
      const content = document.getElementById('other-choices-content');
      const toggle = document.getElementById('other-toggle');
      content.classList.toggle('hidden');
      toggle.classList.toggle('open');
    }

    function renderProgress() {
      const totalStages = 3;
      const currentCount = stageHistory.length;
      
      const progressEl = document.getElementById('progress');
      progressEl.innerHTML = Array(totalStages).fill(0).map((_, idx) => {
        let className = 'progress-bar';
        if (idx < currentCount) className += ' completed';
        else if (idx === currentCount) className += ' current';
        return `<div class="${className}"></div>`;
      }).join('');
    }

    function renderStage() {
      const stage = getStageById(currentStageId);
      if (!stage) return;
      
      document.getElementById('stage-label').textContent = `Stage ${stageHistory.length + 1}`;
      document.getElementById('context').textContent = stage.context;
      document.getElementById('situation').textContent = stage.situation;
      
      const choicesEl = document.getElementById('choices');
      choicesEl.innerHTML = stage.choices.map((choice, idx) => `
        <button class="choice-btn" data-index="${idx}">${choice.text}</button>
      `).join('');
      
      choicesEl.querySelectorAll('.choice-btn').forEach(btn => {
        btn.addEventListener('click', () => handleChoice(parseInt(btn.dataset.index)));
      });
      
      document.getElementById('choices').classList.remove('hidden');
      document.getElementById('result-section').classList.remove('show');
    }

    function handleChoice(index) {
      const stage = getStageById(currentStageId);
      const choice = stage.choices[index];
      
      stageHistory.push({
        stageId: currentStageId,
        choiceIndex: index,
        principle: choice.principle
      });
      
      if (!collectedPrinciples.find(p => p.name === choice.principle)) {
        collectedPrinciples.push({
          name: choice.principle,
          desc: choice.principleDesc
        });
      }
      
      document.getElementById('choices').classList.add('hidden');
      document.getElementById('result-section').classList.add('show');
      
      document.getElementById('selected-text').textContent = choice.text;
      document.getElementById('outcome-text').textContent = choice.outcome;
      document.getElementById('principle-name').textContent = choice.principle;
      document.getElementById('principle-explanation').textContent = choice.principleDesc;
      
      const evalCard = document.getElementById('evaluation-card');
      const evalIcon = document.getElementById('evaluation-icon');
      const evalText = document.getElementById('evaluation-text');
      
      evalCard.className = 'evaluation-card ' + choice.evaluation;
      evalText.textContent = choice.evalText;
      
      if (choice.evaluation === 'positive') evalIcon.textContent = 'âœ“';
      else if (choice.evaluation === 'neutral') evalIcon.textContent = 'âš ï¸';
      else evalIcon.textContent = 'âœ—';
      
      // ë‹¤ë¥¸ ì„ íƒì§€
      const otherChoices = stage.choices.filter((_, i) => i !== index);
      const otherContent = document.getElementById('other-choices-content');
      otherContent.innerHTML = otherChoices.map(c => {
        let evalBadge = '';
        if (c.evaluation === 'positive') evalBadge = '<span class="eval-badge positive">âœ“ íš¨ê³¼ì </span>';
        else if (c.evaluation === 'neutral') evalBadge = '<span class="eval-badge neutral">âš ï¸ ìƒí™©ì— ë”°ë¼</span>';
        else evalBadge = '<span class="eval-badge negative">âœ— ë¦¬ìŠ¤í¬</span>';
        
        return `
          <div class="other-choice-card">
            <div class="other-choice-header">
              ${evalBadge}
            </div>
            <div class="other-choice-text">${c.text}</div>
            <div class="other-choice-outcome">${c.outcome}</div>
            <div class="other-choice-eval">${c.evalText}</div>
            <div class="other-choice-principle"><strong>${c.principle}</strong>: ${c.principleDesc}</div>
          </div>
        `;
      }).join('');
      
      document.getElementById('other-choices-content').classList.add('hidden');
      document.getElementById('other-toggle').classList.remove('open');
      
      // ë‹¤ìŒ ìŠ¤í…Œì´ì§€ ê²°ì •
      const nextBtn = document.getElementById('next-btn');
      if (choice.nextStage === 'end') {
        nextBtn.textContent = 'ê²°ê³¼ ë³´ê¸°';
      } else {
        nextBtn.textContent = 'ë‹¤ìŒ ìƒí™©';
      }
      
      currentStageId = choice.nextStage;
      renderProgress();
    }

    function nextStage() {
      if (currentStageId === 'end') {
        showFinalScreen();
      } else {
        renderStage();
      }
    }

    function showFinalScreen() {
      document.getElementById('game-screen').classList.add('hidden');
      document.getElementById('final-screen').classList.add('show');
      
      // ë°œê²¬í•œ ì›ì¹™ ëª©ë¡
      const principlesList = document.getElementById('principles-list');
      principlesList.innerHTML = collectedPrinciples.map(p => `
        <div class="principle-item">
          <div class="principle-item-icon">ğŸ’¡</div>
          <div class="principle-item-content">
            <div class="principle-item-name">${p.name}</div>
            <div class="principle-item-desc">${p.desc}</div>
          </div>
        </div>
      `).join('');
      
      // í”„ë¡œí•„ ì €ì¥
      saveProgress();
      
      // ì„¤ì¹˜ ë²„íŠ¼ í‘œì‹œ
      showInstallButton();
    }

    function saveProgress() {
      let saved = localStorage.getItem(STORAGE_KEY);
      let profile;
      
      if (saved) {
        profile = JSON.parse(saved);
      } else {
        profile = { name: 'ìµëª… íƒí—˜ê°€', level: 1, exp: 0, completedSims: [], principles: [] };
      }
      
      if (!profile.completedSims) profile.completedSims = [];
      if (!profile.principles) profile.principles = [];
      
      const isFirstTime = !profile.completedSims.includes(SIM_ID);
      
      if (isFirstTime) {
        profile.completedSims.push(SIM_ID);
        profile.exp = (profile.exp || 0) + 30;
        
        const expNeeded = (profile.level || 1) * 100;
        while (profile.exp >= expNeeded) {
          profile.exp -= expNeeded;
          profile.level = (profile.level || 1) + 1;
        }
      }
      
      // ì›ì¹™ ì¶”ê°€
      collectedPrinciples.forEach(p => {
        if (!profile.principles.find(existing => existing.name === p.name)) {
          profile.principles.push(p);
        }
      });
      
      localStorage.setItem(STORAGE_KEY, JSON.stringify(profile));
    }

    function getShareText() {
      return `ğŸŒ™ ì´í´ë¦½ìŠ¤ ë§ˆì¸ë“œë©

[ì•„ì´ë””ì–´ ë„ë‘‘ ë™ë£Œ] í´ë¦¬ì–´!

ë°œê²¬í•œ ì›ì¹™ ${collectedPrinciples.length}ê°œ:
${collectedPrinciples.map(p => 'â€¢ ' + p.name).join('\n')}

ë‹¹ì‹ ì€ ì–´ë–»ê²Œ ëŒ€ì‘í•  ê±´ê°€ìš”?`;
    }

    function nativeShare() {
      if (navigator.share) {
        navigator.share({
          title: 'ì•„ì´ë””ì–´ ë„ë‘‘ ë™ë£Œ - ì´í´ë¦½ìŠ¤ ë§ˆì¸ë“œë©',
          text: getShareText(),
          url: SITE_URL
        }).catch(() => {});
      } else {
        copyLink();
      }
    }

    function copyLink() {
      const text = getShareText() + '\n' + SITE_URL;
      const btn = document.getElementById('copy-btn');
      
      navigator.clipboard.writeText(text).then(() => {
        btn.classList.add('success');
        btn.innerHTML = `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg> ë³µì‚¬ ì™„ë£Œ!`;
        setTimeout(() => {
          btn.classList.remove('success');
          btn.innerHTML = `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg> ë§í¬ ë³µì‚¬`;
        }, 2000);
      });
    }

    function restart() {
      currentStageId = 1;
      collectedPrinciples = [];
      stageHistory = [];
      
      document.getElementById('final-screen').classList.remove('show');
      document.getElementById('game-screen').classList.remove('hidden');
      
      renderProgress();
      renderStage();
    }

    init();

    // PWA ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸
    let deferredPrompt;
    const installBtn = document.getElementById('installBtn');

    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
    });

    // í´ë¦¬ì–´ í™”ë©´ì—ì„œ ì„¤ì¹˜ ë²„íŠ¼ í‘œì‹œ
    function showInstallButton() {
      if (deferredPrompt && installBtn) {
        installBtn.classList.remove('hidden');
      }
    }

    installBtn.addEventListener('click', async () => {
      if (!deferredPrompt) return;
      
      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;
      
      if (outcome === 'accepted') {
        installBtn.classList.add('hidden');
      }
      deferredPrompt = null;
    });

    window.addEventListener('appinstalled', () => {
      installBtn.classList.add('hidden');
      deferredPrompt = null;
    });
  </script>
</body>
</html>
