<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì´í´ë¦½ìŠ¤ ë§ˆì¸ë“œë©</title>
  
  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#7c3aed">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="ë§ˆì¸ë“œë©">
  <link rel="apple-touch-icon" href="icon-192.png">
  
  <!-- SEO -->
  <meta name="description" content="ì‹¬ë¦¬, ì² í•™, ì‚¬íšŒì˜ ìˆ¨ê²¨ì§„ ì›ì¹™ë“¤ì„ ë°œê²¬í•˜ì„¸ìš”. ì´í´ë¦½ìŠ¤ ë§ˆì¸ë“œë©ì—ì„œ ì§€ì  íƒí—˜ì„ ì‹œì‘í•˜ì„¸ìš”.">
  <meta property="og:title" content="ì´í´ë¦½ìŠ¤ ë§ˆì¸ë“œë©">
  <meta property="og:description" content="ì‹¬ë¦¬, ì² í•™, ì‚¬íšŒì˜ ìˆ¨ê²¨ì§„ ì›ì¹™ë“¤ì„ ë°œê²¬í•˜ì„¸ìš”">
  <meta property="og:image" content="icon-512.png">
  <meta property="og:type" content="website">
  
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #09090b;
      color: #fff;
      min-height: 100vh;
      line-height: 1.6;
    }
    
    .container { max-width: 480px; margin: 0 auto; padding: 24px 16px; }

    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 24px;
    }

    .brand { display: flex; align-items: center; gap: 10px; }
    .brand-logo { width: 36px; height: 36px; border-radius: 50%; }
    .brand-text { font-size: 18px; font-weight: 600; color: #a78bfa; }
    
    .beta-badge {
      font-size: 10px;
      padding: 2px 6px;
      background: rgba(251, 191, 36, 0.2);
      color: #fbbf24;
      border-radius: 4px;
      font-weight: 600;
      letter-spacing: 0.5px;
    }

    .header-links { display: flex; gap: 12px; }
    .header-link { color: #71717a; text-decoration: none; font-size: 13px; }
    .header-link:hover { color: #a78bfa; }

    .profile-card {
      background: linear-gradient(135deg, #18181b 0%, #1f1f23 100%);
      border-radius: 20px;
      padding: 24px;
      margin-bottom: 24px;
      border: 1px solid #27272a;
    }

    .profile-top { display: flex; gap: 16px; margin-bottom: 16px; }

    .tier-badge { width: 72px; height: 72px; border-radius: 50%; overflow: hidden; flex-shrink: 0; }
    .tier-badge img { width: 100%; height: 100%; object-fit: cover; }

    .profile-info { flex: 1; }
    .profile-name { font-size: 20px; font-weight: 600; margin-bottom: 2px; }
    .profile-title { font-size: 13px; color: #a78bfa; margin-bottom: 8px; }

    .level-info { display: flex; align-items: center; gap: 8px; }
    .level-text { font-size: 12px; color: #71717a; }
    .level-num { color: #fff; font-weight: 600; }
    .exp-bar { flex: 1; height: 6px; background: #27272a; border-radius: 3px; overflow: hidden; }
    .exp-fill { height: 100%; background: linear-gradient(90deg, #a78bfa, #c084fc); border-radius: 3px; }
    .exp-text { font-size: 11px; color: #71717a; }

    .journey-section { margin-top: 16px; padding-top: 16px; border-top: 1px solid #27272a; }
    .journey-title { font-size: 13px; color: #71717a; margin-bottom: 12px; }
    .journey-stats { display: flex; gap: 16px; }
    .journey-stat { flex: 1; text-align: center; padding: 12px; background: #1f1f23; border-radius: 10px; }
    .journey-stat-value { font-size: 20px; font-weight: 700; }
    .journey-stat-label { font-size: 11px; color: #71717a; }

    .install-btn {
      width: 100%;
      margin-top: 16px;
      padding: 14px;
      background: linear-gradient(135deg, #7c3aed, #5b21b6);
      border: none;
      border-radius: 12px;
      color: #fff;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: all 0.2s;
    }

    .install-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(124, 58, 237, 0.4);
    }

    .install-btn.hidden { display: none; }

    .map-section { margin-bottom: 24px; }
    .section-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; }
    .section-title { font-size: 16px; font-weight: 600; display: flex; align-items: center; gap: 8px; }
    .section-title .icon { font-size: 20px; }
    .section-progress { font-size: 13px; color: #71717a; }

    .category-card {
      background: #18181b;
      border: 1px solid #27272a;
      border-radius: 16px;
      padding: 12px;
    }

    .sim-list { display: flex; flex-direction: column; gap: 8px; }

    .sim-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      background: #1f1f23;
      border-radius: 10px;
      text-decoration: none;
      color: #fff;
      transition: all 0.2s;
    }

    .sim-item:hover { background: #27272a; }
    .sim-item.locked { opacity: 0.5; pointer-events: none; }
    .sim-item.completed { border-left: 3px solid #4ade80; }

    .sim-status { width: 24px; text-align: center; font-size: 14px; }
    .sim-info { flex: 1; }
    .sim-title { font-size: 14px; font-weight: 500; }
    .sim-desc { font-size: 12px; color: #71717a; }
    .sim-reward { font-size: 11px; color: #a78bfa; }

    .principles-section {
      background: #18181b;
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 24px;
    }

    .principles-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; }
    .principles-count { font-size: 13px; color: #a78bfa; }
    .principles-list { display: flex; flex-wrap: wrap; gap: 8px; }
    .principle-tag { padding: 6px 12px; background: #27272a; border-radius: 20px; font-size: 12px; color: #a1a1aa; }
    .principles-empty { font-size: 13px; color: #52525b; text-align: center; padding: 16px; width: 100%; }

    .tier-section { background: #18181b; border-radius: 16px; padding: 20px; margin-bottom: 24px; }
    .tier-progress { display: flex; justify-content: space-between; align-items: center; margin-top: 16px; }
    .tier-item { display: flex; flex-direction: column; align-items: center; gap: 6px; }
    .tier-icon { width: 32px; height: 32px; border-radius: 50%; overflow: hidden; opacity: 0.3; }
    .tier-icon.active { opacity: 1; box-shadow: 0 0 12px rgba(167, 139, 250, 0.5); }
    .tier-icon.completed { opacity: 0.7; }
    .tier-icon img { width: 100%; height: 100%; object-fit: cover; }
    .tier-name { font-size: 10px; color: #52525b; }
    .tier-item.active .tier-name { color: #a78bfa; font-weight: 600; }

    .book-section { margin-bottom: 24px; }
    
    .book-card {
      display: flex;
      align-items: center;
      gap: 16px;
      background: linear-gradient(135deg, #1a1520 0%, #18181b 100%);
      border: 1px solid #2d2438;
      border-radius: 16px;
      padding: 16px;
      text-decoration: none;
      color: #fff;
      transition: all 0.2s;
    }
    
    .book-card:hover {
      border-color: #a78bfa;
      transform: translateY(-2px);
      box-shadow: 0 4px 20px rgba(167, 139, 250, 0.15);
    }
    
    .book-images {
      display: flex;
      gap: 8px;
      flex-shrink: 0;
    }
    
    .book-img {
      width: 56px;
      height: auto;
      border-radius: 4px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.4);
    }
    
    .book-info { flex: 1; }
    .book-series { font-size: 11px; color: #a78bfa; margin-bottom: 4px; }
    .book-main-title { font-size: 14px; font-weight: 600; margin-bottom: 4px; }
    .book-desc { font-size: 12px; color: #71717a; }

    .footer { text-align: center; padding: 24px 0; border-top: 1px solid #27272a; }
    .footer-links { display: flex; justify-content: center; gap: 24px; margin-bottom: 16px; }
    .footer-link { display: flex; align-items: center; gap: 6px; color: #71717a; text-decoration: none; font-size: 13px; }
    .footer-link:hover { color: #a78bfa; }
    .footer-copy { font-size: 11px; color: #52525b; }

    .modal-overlay {
      position: fixed; top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.8);
      display: flex; align-items: center; justify-content: center;
      z-index: 100; padding: 20px;
    }
    .modal-overlay.hidden { display: none; }
    .modal {
      background: #18181b; border-radius: 20px;
      padding: 32px 24px; max-width: 360px; width: 100%; text-align: center;
    }
    .modal-logo { width: 64px; height: 64px; border-radius: 50%; margin-bottom: 16px; }
    .modal-title { font-size: 20px; font-weight: 600; margin-bottom: 8px; }
    .modal-desc { font-size: 14px; color: #71717a; margin-bottom: 24px; line-height: 1.6; }
    .modal-input {
      width: 100%; padding: 14px 16px;
      background: #27272a; border: 1px solid #3f3f46; border-radius: 12px;
      color: #fff; font-size: 16px; margin-bottom: 16px; text-align: center;
    }
    .modal-input:focus { outline: none; border-color: #7c3aed; }
    .modal-btn {
      width: 100%; padding: 14px;
      background: #7c3aed; border: none; border-radius: 12px;
      color: #fff; font-size: 16px; font-weight: 600; cursor: pointer;
    }
    .modal-btn:disabled { opacity: 0.5; cursor: not-allowed; }
  </style>
</head>
<body>
  <div class="modal-overlay" id="nameModal">
    <div class="modal">
      <img src="logo.png" alt="ì´í´ë¦½ìŠ¤" class="modal-logo">
      <div class="modal-title">ì´í´ë¦½ìŠ¤ ë§ˆì¸ë“œë©</div>
      <div class="modal-desc">ì§€ì  íƒí—˜ì„ ì‹œì‘í•˜ì„¸ìš”.<br>ì‹¬ë¦¬, ì² í•™, ì‚¬íšŒì˜ ìˆ¨ê²¨ì§„ ì›ì¹™ë“¤ì„ ë°œê²¬í•©ë‹ˆë‹¤.</div>
      <input type="text" class="modal-input" id="nameInput" placeholder="íƒí—˜ê°€ ì´ë¦„" maxlength="12">
      <button class="modal-btn" id="startBtn" disabled>íƒí—˜ ì‹œì‘</button>
    </div>
  </div>

  <div class="container">
    <div class="header">
      <div class="brand">
        <img src="logo.png" alt="ì´í´ë¦½ìŠ¤" class="brand-logo">
        <span class="brand-text">ì´í´ë¦½ìŠ¤ ë§ˆì¸ë“œë©</span>
        <span class="beta-badge">BETA</span>
      </div>
      <div class="header-links">
        <a href="https://www.youtube.com/@Eclipse-g4e" target="_blank" class="header-link">ìœ íŠœë¸Œ</a>
        <a href="https://litt.ly/eclipse.thinker" target="_blank" class="header-link">ì±…</a>
      </div>
    </div>

    <div class="profile-card">
      <div class="profile-top">
        <div class="tier-badge">
          <img src="tier-ruby.png" alt="í‹°ì–´" id="tierImage">
        </div>
        <div class="profile-info">
          <div class="profile-name" id="profileName">íƒí—˜ê°€</div>
          <div class="profile-title" id="profileTitle">ğŸŒ± ì´ˆë³´ íƒí—˜ê°€</div>
          <div class="level-info">
            <span class="level-text">Lv.<span class="level-num" id="levelNum">1</span></span>
            <div class="exp-bar">
              <div class="exp-fill" id="expFill" style="width: 0%"></div>
            </div>
            <span class="exp-text" id="expText">0/100</span>
          </div>
        </div>
      </div>
      <div class="journey-section">
        <div class="journey-title">íƒí—˜ í˜„í™©</div>
        <div class="journey-stats">
          <div class="journey-stat">
            <div class="journey-stat-value" id="statCleared">0</div>
            <div class="journey-stat-label">í´ë¦¬ì–´</div>
          </div>
          <div class="journey-stat">
            <div class="journey-stat-value" id="statPrinciples">0</div>
            <div class="journey-stat-label">ë°œê²¬í•œ ì›ì¹™</div>
          </div>
        </div>
      </div>

      <button class="install-btn hidden" id="installBtn">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="7 10 12 15 17 10"/>
          <line x1="12" y1="15" x2="12" y2="3"/>
        </svg>
        ì•±ìœ¼ë¡œ ì„¤ì¹˜í•˜ê¸°
      </button>
    </div>

    <div class="map-section">
      <div class="section-header">
        <div class="section-title"><span class="icon">ğŸ§ </span> ì‹¬ë¦¬</div>
        <div class="section-progress" id="psychProgress">0/5</div>
      </div>
      <div class="category-card">
        <div class="sim-list" id="psychList"></div>
      </div>
    </div>

    <div class="map-section">
      <div class="section-header">
        <div class="section-title"><span class="icon">ğŸ’­</span> ì² í•™</div>
        <div class="section-progress" id="philProgress">0/2</div>
      </div>
      <div class="category-card">
        <div class="sim-list" id="philList"></div>
      </div>
    </div>

    <div class="map-section">
      <div class="section-header">
        <div class="section-title"><span class="icon">ğŸ”¬</span> ì‚¬íšŒ</div>
        <div class="section-progress">0/2</div>
      </div>
      <div class="category-card">
        <div class="sim-list">
          <div class="sim-item locked">
            <div class="sim-status">ğŸ”’</div>
            <div class="sim-info">
              <div class="sim-title">ì£„ìˆ˜ì˜ ë”œë ˆë§ˆ</div>
              <div class="sim-desc">Coming Soon</div>
            </div>
          </div>
          <div class="sim-item locked">
            <div class="sim-status">ğŸ”’</div>
            <div class="sim-info">
              <div class="sim-title">ë°©ê´€ì íš¨ê³¼</div>
              <div class="sim-desc">Coming Soon</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="principles-section">
      <div class="principles-header">
        <div class="section-title"><span class="icon">ğŸ’¡</span> ë°œê²¬í•œ ì›ì¹™</div>
        <div class="principles-count" id="principlesCount">0ê°œ</div>
      </div>
      <div class="principles-list" id="principlesList">
        <div class="principles-empty">ì‹œë®¬ë ˆì´ì…˜ì„ í´ë¦¬ì–´í•˜ë©´ ì›ì¹™ë“¤ì´ ì—¬ê¸°ì— ëª¨ì…ë‹ˆë‹¤</div>
      </div>
    </div>

    <div class="tier-section">
      <div class="section-title">í‹°ì–´ ì§„í–‰ë„</div>
      <div class="tier-progress">
        <div class="tier-item active" data-tier="ruby">
          <div class="tier-icon active"><img src="tier-ruby.png"></div>
          <span class="tier-name">ë£¨ë¹„</span>
        </div>
        <div class="tier-item" data-tier="amethyst">
          <div class="tier-icon"><img src="tier-amethyst.png"></div>
          <span class="tier-name">ììˆ˜ì •</span>
        </div>
        <div class="tier-item" data-tier="sapphire">
          <div class="tier-icon"><img src="tier-sapphire.png"></div>
          <span class="tier-name">ì‚¬íŒŒì´ì–´</span>
        </div>
        <div class="tier-item" data-tier="emerald">
          <div class="tier-icon"><img src="tier-emerald.png"></div>
          <span class="tier-name">ì—ë©”ë„ë“œ</span>
        </div>
        <div class="tier-item" data-tier="obsidian">
          <div class="tier-icon"><img src="tier-obsidian.png"></div>
          <span class="tier-name">ì˜µì‹œë””ì–¸</span>
        </div>
        <div class="tier-item" data-tier="gold">
          <div class="tier-icon"><img src="tier-gold.png"></div>
          <span class="tier-name">ê³¨ë“œ</span>
        </div>
      </div>
    </div>

    <div class="book-section">
      <a href="https://litt.ly/eclipse.thinker" target="_blank" class="book-card">
        <div class="book-images">
          <img src="book-philosophy.png" alt="í›”ì¹œ ì² í•™ í¸" class="book-img">
          <img src="book-psychology.png" alt="í›”ì¹œ ì‹¬ë¦¬í•™ í¸" class="book-img">
        </div>
        <div class="book-info">
          <div class="book-series">ì„¸ê³„ì²™í•™ì „ì§‘ ì‹œë¦¬ì¦ˆ</div>
          <div class="book-main-title">í›”ì¹œ ì² í•™ í¸ Â· í›”ì¹œ ì‹¬ë¦¬í•™ í¸</div>
          <div class="book-desc">ì‹œë®¬ë ˆì´í„° ì† ì›ì¹™ë“¤ì˜ ë” ê¹Šì€ ì´ì•¼ê¸°</div>
        </div>
      </a>
    </div>

    <div class="footer">
      <div class="footer-links">
        <a href="https://www.youtube.com/@Eclipse-g4e" target="_blank" class="footer-link">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
            <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814z"/>
            <path fill="#09090b" d="M9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
          </svg>
          ìœ íŠœë¸Œ
        </a>
        <a href="https://litt.ly/eclipse.thinker" target="_blank" class="footer-link">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
          </svg>
          ì±…
        </a>
      </div>
      <div class="footer-copy">Â© ì´í´ë¦½ìŠ¤ ë§ˆì¸ë“œë©</div>
    </div>
  </div>

  <script>
    const STORAGE_KEY = 'eclipse_mindlab_profile';
    const CURRENT_VERSION = 5;

    const TIERS = [
      { name: 'ë£¨ë¹„', key: 'ruby', minLevel: 1 },
      { name: 'ììˆ˜ì •', key: 'amethyst', minLevel: 6 },
      { name: 'ì‚¬íŒŒì´ì–´', key: 'sapphire', minLevel: 11 },
      { name: 'ì—ë©”ë„ë“œ', key: 'emerald', minLevel: 16 },
      { name: 'ì˜µì‹œë””ì–¸', key: 'obsidian', minLevel: 21 },
      { name: 'ê³¨ë“œ', key: 'gold', minLevel: 26 }
    ];

    const TITLES = [
      { minLevel: 1, title: 'ğŸŒ± ì´ˆë³´ íƒí—˜ê°€' },
      { minLevel: 5, title: 'ğŸŒ¿ í˜¸ê¸°ì‹¬ ë§ì€ ê´€ì°°ì' },
      { minLevel: 10, title: 'ğŸŒ³ ê¹Šì´ ìˆëŠ” ì‚¬ìƒ‰ê°€' },
      { minLevel: 20, title: 'ğŸŒŸ í†µì°°ì˜ ëŒ€ê°€' }
    ];

    const SIMULATIONS = {
      psych: [
        { id: 'idea_thief', title: 'ì•„ì´ë””ì–´ ë„ë‘‘ ë™ë£Œ', desc: 'ë„¤ ì•„ì´ë””ì–´ë¥¼ ê°€ë¡œì±ˆ ë™ë£Œ', url: 'sim-idea-thief.html' },
        { id: 'money_friend', title: 'ëˆ ì•ˆ ê°šëŠ” ì¹œêµ¬', desc: '3ê°œì›”ì§¸ 30ë§Œì›ì„ ì•ˆ ê°šëŠ” ì¹œêµ¬', url: 'sim-money-friend.html' },
        { id: 'dating_progress', title: 'ì¸ ì§„ì „ì‹œí‚¤ê¸°', desc: 'ì¹´í†¡ë§Œ í•˜ëŠ” ê´€ê³„, ì–´ë–»ê²Œ?', url: null },
        { id: 'free_rider', title: 'ë¬´ì„ìŠ¹ì°¨ íŒ€ì›', desc: 'ì¼ ì•ˆ í•˜ëŠ” íŒ€ì›', url: null },
        { id: 'parent_nagging', title: 'ë¶€ëª¨ë‹˜ ì”ì†Œë¦¬', desc: 'ì§„ë¡œì— ëŒ€í•œ ëì—†ëŠ” ì”ì†Œë¦¬', url: null }
      ],
      philosophy: [
        { id: 'trolley', title: 'íŠ¸ë¡¤ë¦¬ ë”œë ˆë§ˆ', desc: '5ëª…ì„ ì‚´ë¦¬ê¸° ìœ„í•´ 1ëª…ì„ ì£½ì¼ ìˆ˜ ìˆëŠ”ê°€?', url: null },
        { id: 'experience_machine', title: 'ê²½í—˜ ê¸°ê³„', desc: 'ì™„ë²½í•œ ê°€ì§œ í–‰ë³µ vs ë¶ˆì™„ì „í•œ í˜„ì‹¤', url: 'sim-experience-machine.html' }
      ]
    };

    let profile = {
      version: CURRENT_VERSION,
      name: '',
      level: 1,
      exp: 0,
      completedSims: [],
      principles: []
    };

    function loadProfile() {
      const saved = localStorage.getItem(STORAGE_KEY);
      if (saved) {
        let p = JSON.parse(saved);
        if (!p.version || p.version < CURRENT_VERSION) {
          p = migrateProfile(p);
        }
        profile = p;
        return true;
      }
      return false;
    }

    function migrateProfile(old) {
      const migrated = {
        version: CURRENT_VERSION,
        name: old.name || '',
        level: old.level || 1,
        exp: old.exp || 0,
        completedSims: old.completedSims || old.completedTests || [],
        principles: old.principles || []
      };
      localStorage.setItem(STORAGE_KEY, JSON.stringify(migrated));
      return migrated;
    }

    function saveProfile() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(profile));
    }

    function getTier(level) {
      for (let i = TIERS.length - 1; i >= 0; i--) {
        if (level >= TIERS[i].minLevel) return TIERS[i];
      }
      return TIERS[0];
    }

    function getTitle(level) {
      for (let i = TITLES.length - 1; i >= 0; i--) {
        if (level >= TITLES[i].minLevel) return TITLES[i].title;
      }
      return TITLES[0].title;
    }

    function updateUI() {
      const tier = getTier(profile.level);
      const title = getTitle(profile.level);
      const expNeeded = profile.level * 100;
      const expPercent = (profile.exp / expNeeded) * 100;

      document.getElementById('profileName').textContent = profile.name || 'íƒí—˜ê°€';
      document.getElementById('profileTitle').textContent = title;
      document.getElementById('tierImage').src = 'tier-' + tier.key + '.png';
      document.getElementById('levelNum').textContent = profile.level;
      document.getElementById('expFill').style.width = expPercent + '%';
      document.getElementById('expText').textContent = profile.exp + '/' + expNeeded;
      
      document.getElementById('statCleared').textContent = profile.completedSims.length;
      document.getElementById('statPrinciples').textContent = profile.principles.length;

      // ì‹¬ë¦¬ ì‹œë®¬ë ˆì´ì…˜ ëª©ë¡
      const psychList = document.getElementById('psychList');
      const completedPsych = SIMULATIONS.psych.filter(s => profile.completedSims.includes(s.id)).length;
      document.getElementById('psychProgress').textContent = `${completedPsych}/${SIMULATIONS.psych.length}`;
      
      psychList.innerHTML = SIMULATIONS.psych.map(sim => {
        const isCompleted = profile.completedSims.includes(sim.id);
        const isLocked = !sim.url;
        
        let className = 'sim-item';
        if (isCompleted) className += ' completed';
        if (isLocked) className += ' locked';
        
        const status = isCompleted ? 'âœ“' : (isLocked ? 'ğŸ”’' : 'â—‹');
        const reward = isCompleted ? 'ì™„ë£Œ' : '+30 EXP';
        
        if (isLocked) {
          return `
            <div class="${className}">
              <div class="sim-status">${status}</div>
              <div class="sim-info">
                <div class="sim-title">${sim.title}</div>
                <div class="sim-desc">Coming Soon</div>
              </div>
            </div>
          `;
        }
        
        return `
          <a href="${sim.url}" class="${className}">
            <div class="sim-status">${status}</div>
            <div class="sim-info">
              <div class="sim-title">${sim.title}</div>
              <div class="sim-desc">${sim.desc}</div>
            </div>
            <div class="sim-reward">${reward}</div>
          </a>
        `;
      }).join('');

      // ì² í•™ ì‹œë®¬ë ˆì´ì…˜ ëª©ë¡
      const philList = document.getElementById('philList');
      const completedPhil = SIMULATIONS.philosophy.filter(s => profile.completedSims.includes(s.id)).length;
      document.getElementById('philProgress').textContent = `${completedPhil}/${SIMULATIONS.philosophy.length}`;
      
      philList.innerHTML = SIMULATIONS.philosophy.map(sim => {
        const isCompleted = profile.completedSims.includes(sim.id);
        const isLocked = !sim.url;
        
        let className = 'sim-item';
        if (isCompleted) className += ' completed';
        if (isLocked) className += ' locked';
        
        const status = isCompleted ? 'âœ“' : (isLocked ? 'ğŸ”’' : 'â—‹');
        const reward = isCompleted ? 'ì™„ë£Œ' : '+30 EXP';
        
        if (isLocked) {
          return `
            <div class="${className}">
              <div class="sim-status">${status}</div>
              <div class="sim-info">
                <div class="sim-title">${sim.title}</div>
                <div class="sim-desc">Coming Soon</div>
              </div>
            </div>
          `;
        }
        
        return `
          <a href="${sim.url}" class="${className}">
            <div class="sim-status">${status}</div>
            <div class="sim-info">
              <div class="sim-title">${sim.title}</div>
              <div class="sim-desc">${sim.desc}</div>
            </div>
            <div class="sim-reward">${reward}</div>
          </a>
        `;
      }).join('');

      // ë°œê²¬í•œ ì›ì¹™
      const principlesList = document.getElementById('principlesList');
      document.getElementById('principlesCount').textContent = profile.principles.length + 'ê°œ';
      
      if (profile.principles.length > 0) {
        principlesList.innerHTML = profile.principles.map(p => 
          `<span class="principle-tag">${p.name}</span>`
        ).join('');
      } else {
        principlesList.innerHTML = '<div class="principles-empty">ì‹œë®¬ë ˆì´ì…˜ì„ í´ë¦¬ì–´í•˜ë©´ ì›ì¹™ë“¤ì´ ì—¬ê¸°ì— ëª¨ì…ë‹ˆë‹¤</div>';
      }

      // í‹°ì–´ ì§„í–‰ë„
      TIERS.forEach(t => {
        const item = document.querySelector(`.tier-item[data-tier="${t.key}"]`);
        if (!item) return;
        const icon = item.querySelector('.tier-icon');
        item.classList.remove('active');
        icon.classList.remove('active', 'completed');
        if (t.key === tier.key) {
          item.classList.add('active');
          icon.classList.add('active');
        } else if (profile.level >= t.minLevel) {
          icon.classList.add('completed');
        }
      });
    }

    function init() {
      const nameInput = document.getElementById('nameInput');
      const startBtn = document.getElementById('startBtn');
      const nameModal = document.getElementById('nameModal');

      if (loadProfile() && profile.name) {
        nameModal.classList.add('hidden');
        updateUI();
      }

      nameInput.addEventListener('input', () => {
        startBtn.disabled = nameInput.value.trim().length < 2;
      });

      startBtn.addEventListener('click', () => {
        const name = nameInput.value.trim();
        if (name.length >= 2) {
          profile.name = name;
          saveProfile();
          nameModal.classList.add('hidden');
          updateUI();
        }
      });
    }

    init();
    
    // PWA ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸
    let deferredPrompt;
    const installBtn = document.getElementById('installBtn');

    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      // ì„¤ì¹˜ ë²„íŠ¼ í‘œì‹œ
      installBtn.classList.remove('hidden');
    });

    installBtn.addEventListener('click', async () => {
      if (!deferredPrompt) return;
      
      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;
      
      if (outcome === 'accepted') {
        installBtn.classList.add('hidden');
      }
      deferredPrompt = null;
    });

    // ì´ë¯¸ ì„¤ì¹˜ëìœ¼ë©´ ë²„íŠ¼ ìˆ¨ê¹€
    window.addEventListener('appinstalled', () => {
      installBtn.classList.add('hidden');
      deferredPrompt = null;
    });
    
    // Service Worker ë“±ë¡
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js')
        .then(() => console.log('SW registered'))
        .catch(err => console.log('SW registration failed:', err));
    }
  </script>
</body>
</html>
