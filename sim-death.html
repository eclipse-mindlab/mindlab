<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>ì£½ìŒì„ ì•ë‘” ì„ íƒ - ì´í´ë¦½ìŠ¤ì˜ ë”œë ˜</title>
  <link rel="stylesheet" href="sim-template.css">
  <meta property="og:title" content="ì£½ìŒì„ ì•ë‘” ì„ íƒ - ì´í´ë¦½ìŠ¤ì˜ ë”œë ˜">
  <meta property="og:description" content="6ê°œì›”ì´ ë‚¨ì•˜ë‹¤. ë‹¹ì‹ ì€ ì–´ë–»ê²Œ ì‚´ê² ëŠ”ê°€?">
  <meta property="og:image" content="https://eclipse-mindlab.github.io/mindlab/og-image.png?v=2">
  <style>
    :root {
      --sim-primary: #6b7280;
      --sim-primary-light: #9ca3af;
      --sim-primary-bg: rgba(107, 114, 128, 0.1);
      --sim-primary-border: rgba(107, 114, 128, 0.3);
    }
  </style>
</head>
<body>
  <div class="sim-container">
    <!-- í—¤ë” -->
    <div class="sim-header">
      <a href="index.html" class="sim-back-btn">â†</a>
      <div class="sim-header-title">ì£½ìŒì„ ì•ë‘” ì„ íƒ</div>
    </div>

    <!-- ê²Œì„ í™”ë©´ -->
    <div id="gameScreen">
      <div class="sim-progress">
        <div class="sim-progress-label">
          <span id="stageLabel">STAGE 1</span>
          <span id="stageCount">1/4</span>
        </div>
        <div class="sim-progress-bar">
          <div class="sim-progress-fill" id="progressFill" style="width: 25%"></div>
        </div>
      </div>

      <div class="sim-stage-badge" id="stageBadge">STAGE 1</div>

      <div class="sim-situation">
        <div class="sim-situation-title" id="situationTitle">ìƒí™© ì œëª©</div>
        <div class="sim-situation-desc" id="situationDesc">ìƒí™© ì„¤ëª…</div>
        <div class="sim-situation-highlight hidden" id="situationHighlight"></div>
        <div class="sim-situation-quote hidden" id="situationQuote"></div>
      </div>

      <div class="sim-choices" id="choices"></div>
    </div>

    <!-- í•´ì„¤ í™”ë©´ -->
    <div id="explanationScreen" class="hidden">
      <div class="sim-explanation-card">
        <div class="sim-explanation-label">ë‹¹ì‹ ì˜ ì„ íƒ</div>
        <div class="sim-explanation-title" id="yourChoice">ì„ íƒ ë‚´ìš©</div>
      </div>

      <div class="sim-explanation-card hidden" id="meaningCard">
        <div class="sim-explanation-label">ì´ ì„ íƒì´ ì˜ë¯¸í•˜ëŠ” ê²ƒ</div>
        <div class="sim-explanation-desc" id="choiceMeaning">í•´ì„¤ ë‚´ìš©</div>
      </div>

      <div class="sim-principle-card hidden" id="principleCard">
        <div class="sim-principle-header">
          <span class="sim-principle-icon">ğŸ’¡</span>
          <span>ë°œê²¬í•œ ì² í•™ì  ì›ì¹™</span>
        </div>
        <div class="sim-principle-name" id="principleName">ì›ì¹™ ì´ë¦„</div>
        <div class="sim-principle-desc" id="principleDesc">ì›ì¹™ ì„¤ëª…</div>
      </div>

      <div class="sim-quote-card hidden" id="quoteCard">
        <span class="sim-quote-icon">ğŸ’¬</span>
        <span class="sim-quote-text" id="quoteText">ì¸ìš©êµ¬</span>
      </div>

      <button class="sim-next-btn" id="nextBtn">ë‹¤ìŒìœ¼ë¡œ</button>
    </div>

    <!-- ê²°ê³¼ í™”ë©´ -->
    <div id="resultScreen" class="hidden">
      <div class="sim-result-card">
        <div class="sim-result-icon" id="resultIcon">ğŸ’€</div>
        <div class="sim-result-label" id="resultLabel">ë‹¹ì‹ ì˜ ì£½ìŒê´€</div>
        <div class="sim-result-title" id="resultTitle">ê²°ê³¼ íƒ€ì…</div>
        <div class="sim-result-desc" id="resultDesc">ê²°ê³¼ ì„¤ëª…</div>
      </div>

      <div class="sim-principles-list hidden" id="principlesList"></div>

      <div class="sim-actions">
        <button class="sim-action-btn primary" id="shareBtn">ê²°ê³¼ ê³µìœ í•˜ê¸°</button>
        <a href="index.html" class="sim-action-btn secondary">í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
      </div>

      <!-- í”„ë¡œëª¨ì…˜ ì„¹ì…˜ -->
      <div class="sim-promo">
        <!-- ì² í•™ì±… -->
        <div class="sim-books" style="margin-top: 0;">
          <div class="sim-books-desc" style="font-size: 13px; color: #a1a1aa; text-align: center; margin-bottom: 12px; line-height: 1.6;">
            ì´ ì‹œë®¬ë ˆì´í„°ì— ë“±ì¥í•œ ì†Œí¬ë¼í…ŒìŠ¤, í”Œë¼í†¤, ì—í”¼ì¿ ë¡œìŠ¤,<br>
            ë‹ˆì²´, í•˜ì´ë°ê±°, ì¹´ë®ˆ, ì‚¬ë¥´íŠ¸ë¥´ì˜ ì² í•™ì„ ë” ê¹Šì´ ì•Œê³  ì‹¶ë‹¤ë©´
          </div>
          <a href="https://litt.ly/eclipse.thinker" target="_blank" class="sim-book-item" style="display: flex; flex-direction: column; align-items: center;">
            <img src="book-philosophy.png" alt="í›”ì¹œ ì² í•™ í¸" class="sim-book-cover" style="width: 120px; height: auto; border-radius: 8px;">
            <div class="sim-book-title" style="margin-top: 12px; font-size: 14px; color: #fff;">ì„¸ê³„ì²™í•™ì „ì§‘ - í›”ì¹œ ì² í•™ í¸</div>
          </a>
        </div>
      </div>
    </div>
  </div>

  <script>
    const STORAGE_KEY = 'eclipse_mindlab_profile';
    
    // ê²Œì„ ìƒíƒœ
    let currentStageIndex = 0;
    let choices = [];
    let principles = [];
    
    // ëª¨ë“  ìŠ¤í…Œì´ì§€
    const stages = [
      // Stage 1: ì„ ê³ 
      {
        badge: 'STAGE 1: ì„ ê³ ',
        title: '6ê°œì›”',
        desc: 'ë³‘ì›. ì˜ì‚¬ê°€ ê²€ì‚¬ ê²°ê³¼ì§€ë¥¼ ë‚´ë ¤ë†“ìœ¼ë©° ë§í•œë‹¤.\n\n"ì†”ì§í•˜ê²Œ ë§ì”€ë“œë¦¬ê² ìŠµë‹ˆë‹¤. 6ê°œì›” ì •ë„ ë‚¨ì•˜ìŠµë‹ˆë‹¤."',
        highlight: 'ë‹¹ì‹ ì˜ ì²« ë°˜ì‘ì€?',
        choices: [
          {
            id: 'deny',
            text: '"ê²€ì‚¬ ë‹¤ì‹œ í•´ì£¼ì„¸ìš”."',
            meaning: 'ë°›ì•„ë“¤ì´ê¸° ì‹«ì€ í˜„ì‹¤ì„ ë°€ì–´ë‚¸ë‹¤. ì´ê²ƒì€ ìì—°ìŠ¤ëŸ¬ìš´ ë°˜ì‘ì´ë‹¤. ë§ˆìŒì´ ì¶©ê²©ì„ í¡ìˆ˜í•  ì‹œê°„ì´ í•„ìš”í•˜ë‹¤.',
            principle: {
              name: 'ë¶€ì •',
              desc: 'ì£½ìŒì„ ì§ë©´í–ˆì„ ë•Œ ë‚˜íƒ€ë‚˜ëŠ” ì²« ë²ˆì§¸ ë°©ì–´ ê¸°ì œ. í€´ë¸”ëŸ¬-ë¡œìŠ¤ê°€ ì •ì˜í•œ ì• ë„ì˜ 5ë‹¨ê³„ ì¤‘ ì²« ë‹¨ê³„ë‹¤.',
              icon: 'ğŸš«'
            },
            quote: '"ë¶€ì •ì€ ë§ˆìŒì˜ ì™„ì¶©ì¥ì¹˜ë‹¤." - ì—˜ë¦¬ìë² ìŠ¤ í€´ë¸”ëŸ¬-ë¡œìŠ¤'
          },
          {
            id: 'accept',
            text: '"...ì•Œê² ìŠµë‹ˆë‹¤."',
            meaning: 'ì €í•­í•˜ì§€ ì•ŠëŠ”ë‹¤. í†µì œí•  ìˆ˜ ì—†ëŠ” ê²ƒì— ì—ë„ˆì§€ë¥¼ ì“°ì§€ ì•Šê² ë‹¤ëŠ” ì„ íƒ.',
            principle: {
              name: 'ìŠ¤í† ì•„ì  ìˆ˜ìš©',
              desc: 'ìš°ë¦¬ê°€ í†µì œí•  ìˆ˜ ìˆëŠ” ê²ƒê³¼ ì—†ëŠ” ê²ƒì„ êµ¬ë¶„í•˜ë¼. í†µì œ ë°–ì˜ ê²ƒì— í”ë“¤ë¦¬ì§€ ì•ŠëŠ” ê²ƒì´ ì§€í˜œë‹¤.',
              icon: 'ğŸ›ï¸'
            },
            quote: '"ìš°ë¦¬ë¥¼ ê´´ë¡­íˆëŠ” ê²ƒì€ ì¼ ìì²´ê°€ ì•„ë‹ˆë¼, ê·¸ê²ƒì— ëŒ€í•œ ìš°ë¦¬ì˜ íŒë‹¨ì´ë‹¤." - ì—í”½í…Œí† ìŠ¤'
          },
          {
            id: 'angry',
            text: '"ì™œ í•˜í•„ ì €ì˜ˆìš”? ë­˜ ì˜ëª»í–ˆëŠ”ë°ìš”?"',
            meaning: 'ì„¸ìƒì˜ ë¶ˆê³µì •í•¨ì— ë¶„ë…¸í•œë‹¤. ì™œ ë‚˜ì¸ê°€? ì´ ì§ˆë¬¸ì—ëŠ” ë‹µì´ ì—†ë‹¤. ê·¸ë˜ì„œ ë” í™”ê°€ ë‚œë‹¤.',
            principle: {
              name: 'ë¶€ì¡°ë¦¬ì— ëŒ€í•œ ë¶„ë…¸',
              desc: 'ì„¸ìƒì€ ê³µì •í•˜ì§€ ì•Šë‹¤. ì´ìœ  ì—†ì´ ê³ í†µë°›ëŠ”ë‹¤ëŠ” ì‚¬ì‹¤ ìì²´ê°€ ì¸ê°„ì„ ë¶„ë…¸í•˜ê²Œ ë§Œë“ ë‹¤.',
              icon: 'ğŸ˜¤'
            },
            quote: '"ë¶€ì¡°ë¦¬ë€ ì´ì„±ì  ì¸ê°„ê³¼ ë¬´ê´€ì‹¬í•œ ì„¸ê³„ì˜ ëŒ€ë¦½ì´ë‹¤." - ì•Œë² ë¥´ ì¹´ë®ˆ'
          },
          {
            id: 'laugh',
            text: '(ì›ƒìŒ) "6ê°œì›”ì´ë‚˜ìš”?"',
            meaning: 'ì—­ì„¤ì  ë°˜ì‘. ìµœì•…ì˜ ì†Œì‹ ì•ì—ì„œ ì˜¤íˆë ¤ ììœ ë¡œì›Œì§„ë‹¤. ë” ì´ìƒ ìƒì„ ê²ƒì´ ì—†ë‹¤.',
            principle: {
              name: 'ì£½ìŒ ì•ì˜ ììœ ',
              desc: 'ì£½ìŒì„ í™•ì •ì ìœ¼ë¡œ ë§ˆì£¼í•˜ë©´, ì—­ì„¤ì ìœ¼ë¡œ ì‚¶ì˜ ì†ë°•ì—ì„œ í’€ë ¤ë‚œë‹¤. í•˜ì´ë°ê±°ê°€ ë§í•œ ë³¸ë˜ì  ì‹¤ì¡´ì˜ ì‹œì‘.',
              icon: 'ğŸ•Šï¸'
            },
            quote: '"ì£½ìŒì„ í–¥í•œ ì¡´ì¬ë§Œì´ ì§„ì •ìœ¼ë¡œ ììœ ë¡­ë‹¤." - ë§ˆë¥´í‹´ í•˜ì´ë°ê±°'
          },
          {
            id: 'cynical',
            text: '"ê·¸ë˜ì„œìš”? ì–´ì©Œë¼ê³ ìš”?"',
            meaning: 'ëƒ‰ì†Œ. ê°ì •ì„ ì°¨ë‹¨í•œë‹¤. ì˜ì‚¬ë„, ë³‘ë„, ì£½ìŒë„ - ë‹¤ ì˜ë¯¸ ì—†ë‹¤ëŠ” íƒœë„.',
            principle: {
              name: 'ëƒ‰ì†Œì  ë°©ì–´',
              desc: 'ì˜ë¯¸ë¥¼ ë¶€ì •í•¨ìœ¼ë¡œì¨ ê³ í†µì„ íšŒí”¼í•œë‹¤. ìƒì²˜ë°›ì§€ ì•Šê¸° ìœ„í•´ ë¨¼ì € ëª¨ë“  ê²ƒì„ ë¬´ì˜ë¯¸í•˜ê²Œ ë§Œë“ ë‹¤.',
              icon: 'ğŸ˜'
            },
            quote: '"ëƒ‰ì†Œì£¼ì˜ìëŠ” ëª¨ë“  ê²ƒì˜ ê°€ê²©ì„ ì•Œì§€ë§Œ ê°€ì¹˜ëŠ” ëª¨ë¥¸ë‹¤." - ì˜¤ìŠ¤ì¹´ ì™€ì¼ë“œ'
          }
        ]
      },
      
      // Stage 2: ê·¸ë‚  ë°¤
      {
        badge: 'STAGE 2: ê·¸ë‚  ë°¤',
        title: 'ì²œì¥ì„ ë³´ë©°',
        desc: 'ì§‘ì— ëŒì•„ì™”ë‹¤. ì¹¨ëŒ€ì— ëˆ„ì›Œ ì²œì¥ì„ ë³¸ë‹¤.\n\n6ê°œì›”. 180ì¼. 4,320ì‹œê°„.\n\në­˜ í•´ì•¼ í•˜ì§€?',
        choices: [
          {
            id: 'bucket',
            text: 'ë²„í‚·ë¦¬ìŠ¤íŠ¸ë¥¼ ì“´ë‹¤. ë‹¹ì¥ ë‚´ì¼ë¶€í„°.',
            meaning: 'ë‚¨ì€ ì‹œê°„ì„ ìµœëŒ€í•œ ì±„ìš°ê² ë‹¤. í•˜ê³  ì‹¶ì—ˆë˜ ê²ƒ, ë¯¸ë¤˜ë˜ ê²ƒ, ê¿ˆê¿¨ë˜ ê²ƒ.',
            principle: {
              name: 'ì¹´ë¥´í˜ ë””ì— ',
              desc: 'ì˜¤ëŠ˜ì„ ì¡ì•„ë¼. ë‚´ì¼ì€ ì•½ì†ë˜ì§€ ì•Šì•˜ë‹¤. ìˆœê°„ì„ ìµœëŒ€í•œ ì‚´ì•„ë¼.',
              icon: 'ğŸ“'
            },
            quote: '"ì˜¤ëŠ˜ì„ ì¡ì•„ë¼, ê°€ëŠ¥í•œ í•œ ë‚´ì¼ì„ ë¯¿ì§€ ë§ë¼." - í˜¸ë¼í‹°ìš°ìŠ¤'
          },
          {
            id: 'normal',
            text: 'ì•„ë¬´ê²ƒë„ ì•ˆ í•œë‹¤. ì›ë˜ ê·¸ë¬ë“¯ì´.',
            meaning: 'íŠ¹ë³„í•´ì§€ë ¤ í•˜ì§€ ì•ŠëŠ”ë‹¤. ì¼ìƒì´ ì´ë¯¸ ì¶©ë¶„í•˜ë‹¤ë©´, ì£½ìŒ ì•ì—ì„œë„ ë°”ê¿€ ì´ìœ ê°€ ì—†ë‹¤.',
            principle: {
              name: 'ì¼ìƒì˜ ì‹ ì„±í•¨',
              desc: 'ê¹¨ë‹¬ìŒì€ íŠ¹ë³„í•œ ê³³ì— ì—†ë‹¤. ë°¥ ë¨¹ê³ , ì ìê³ , ê±·ëŠ” ê²ƒ. í‰ë²”í•œ ì¼ìƒì´ ê³§ ìˆ˜í–‰ì´ë‹¤.',
              icon: 'ğŸµ'
            },
            quote: '"ë„ë¥¼ ê¹¨ë‹«ê¸° ì „ì—ëŠ” ë‚˜ë¬´ë¥¼ íŒ¨ê³  ë¬¼ì„ ê¸·ëŠ”ë‹¤. ê¹¨ë‹¬ì€ í›„ì—ë„ ë‚˜ë¬´ë¥¼ íŒ¨ê³  ë¬¼ì„ ê¸·ëŠ”ë‹¤." - ì„ ë¶ˆêµ'
          },
          {
            id: 'legacy',
            text: 'ë­”ê°€ ë‚¨ê²¨ì•¼ í•´. ì±…ì´ë“ , ì˜ìƒì´ë“ .',
            meaning: 'ìœ¡ì²´ëŠ” ì£½ì–´ë„ í”ì ì€ ë‚¨ê¸´ë‹¤. ê¸°ì–µë˜ê³  ì‹¶ë‹¤. ì™„ì „íˆ ì‚¬ë¼ì§€ê³  ì‹¶ì§€ ì•Šë‹¤.',
            principle: {
              name: 'ë¶ˆë©¸ í”„ë¡œì íŠ¸',
              desc: 'ì¸ê°„ì€ ì£½ìŒì„ ì•Œê¸°ì—, ìƒì§•ì  ë¶ˆë©¸ì„ ì¶”êµ¬í•œë‹¤. ì—…ì , ìë…€, ì˜ˆìˆ  - ëª¨ë‘ ì£½ìŒì„ ë¶€ì •í•˜ë ¤ëŠ” ì‹œë„ë‹¤.',
              icon: 'ğŸ“š'
            },
            quote: '"ì¸ê°„ ë¬¸ëª…ì˜ ìƒë‹¹ ë¶€ë¶„ì€ ì£½ìŒì˜ ê³µí¬ë¥¼ ë¶€ì •í•˜ë ¤ëŠ” ì‹œë„ë‹¤." - ì–´ë‹ˆìŠ¤íŠ¸ ë² ì»¤'
          },
          {
            id: 'people',
            text: 'ê·¸ë™ì•ˆ ëª» ë§Œë‚œ ì‚¬ëŒë“¤ì—ê²Œ ì—°ë½í•œë‹¤.',
            meaning: 'ê²°êµ­ ë‚¨ëŠ” ê±´ ê´€ê³„ë‹¤. ì¼ë„, ëˆë„, ëª…ì˜ˆë„ ì•„ë‹Œ ì‚¬ëŒ.',
            principle: {
              name: 'ê´€ê³„ì˜ ë³¸ì§ˆ',
              desc: 'ì¸ê°„ì€ ê´€ê³„ ì†ì—ì„œë§Œ ì§„ì •í•œ ìê¸°ê°€ ëœë‹¤. "ë‚˜"ëŠ” "ë„ˆ"ë¥¼ í†µí•´ì„œë§Œ ì¡´ì¬í•œë‹¤.',
              icon: 'ğŸ¤'
            },
            quote: '"ëª¨ë“  ì°¸ëœ ì‚¶ì€ ë§Œë‚¨ì´ë‹¤." - ë§ˆë¥´í‹´ ë¶€ë²„'
          },
          {
            id: 'alone',
            text: 'ì•„ë¬´ì—ê²Œë„ ë§í•˜ì§€ ì•ŠëŠ”ë‹¤.',
            meaning: 'í˜¼ì ê°ë‹¹í•œë‹¤. ë™ì •ë°›ê¸° ì‹«ë‹¤. ë‹¬ë¼ì§„ ëˆˆë¹›ì„ ê²¬ë”œ ìˆ˜ ì—†ë‹¤.',
            principle: {
              name: 'ê³ ë…í•œ ì£½ìŒ',
              desc: 'ì£½ìŒì€ ê²°êµ­ í˜¼ì ë§ì´í•˜ëŠ” ê²ƒì´ë‹¤. ëˆ„êµ¬ë„ ëŒ€ì‹  ì£½ì–´ì¤„ ìˆ˜ ì—†ë‹¤. ê·¸ë˜ì„œ í˜¼ì ì¤€ë¹„í•œë‹¤.',
              icon: 'ğŸš¶'
            },
            quote: '"ì¸ê°„ì€ í˜¼ì íƒœì–´ë‚˜ í˜¼ì ì£½ëŠ”ë‹¤." - ë¸”ë ˆì¦ˆ íŒŒìŠ¤ì¹¼'
          },
          {
            id: 'pray',
            text: 'ì‹ ì—ê²Œ ê¸°ë„í•œë‹¤.',
            meaning: 'ì¸ê°„ì˜ í•œê³„ ì•ì—ì„œ ì´ˆì›”ì  ì¡´ì¬ì—ê²Œ ì˜íƒí•œë‹¤. ë‚´ê°€ ì´í•´í•  ìˆ˜ ì—†ì–´ë„, ë” í° ê³„íšì´ ìˆì„ ê²ƒì´ë‹¤.',
            principle: {
              name: 'ì´ˆì›”ì  ì˜íƒ',
              desc: 'ì¸ê°„ ì´ì„±ìœ¼ë¡œ ì´í•´í•  ìˆ˜ ì—†ëŠ” ê²ƒë“¤ì´ ìˆë‹¤. ê·¸ë•Œ ë¯¿ìŒì´ ì‹œì‘ëœë‹¤. ì‹ , ìš´ëª…, ìš°ì£¼ì˜ ì„­ë¦¬.',
              icon: 'ğŸ™'
            },
            quote: '"ì´í•´í•  ìˆ˜ ì—†ê¸°ì— ë¯¿ëŠ”ë‹¤." - í…Œë¥´íˆ´ë¦¬ì•„ëˆ„ìŠ¤'
          }
        ]
      },
      
      // Stage 3: í•œ ë‹¬ í›„
      {
        badge: 'STAGE 3: í•œ ë‹¬ í›„',
        title: 'ì£½ìŒì´ë€ ë­˜ê¹Œ',
        desc: 'í•œ ë‹¬ì´ ì§€ë‚¬ë‹¤. ê°€ê¹Œìš´ ì‚¬ëŒì´ ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ ë¬»ëŠ”ë‹¤.\n\n"...ì£½ìŒì´ ë­ë¼ê³  ìƒê°í•´?"',
        choices: [
          {
            id: 'nothing',
            text: '"ëì´ì§€. ê·¸ëƒ¥ ì—†ì–´ì§€ëŠ” ê±°ì•¼."',
            meaning: 'ì˜ì‹ì€ ë‡Œì˜ ì‚°ë¬¼ì´ë‹¤. ë‡Œê°€ ë©ˆì¶”ë©´ ë‚˜ë„ ë©ˆì¶˜ë‹¤. ë‘ë ¤ì›Œí•  ëŒ€ìƒì¡°ì°¨ ì—†ë‹¤.',
            principle: {
              name: 'ìœ ë¬¼ë¡ ì  ì£½ìŒê´€',
              desc: 'ì£½ìŒ ì´í›„ì—ëŠ” ì•„ë¬´ê²ƒë„ ì—†ë‹¤. ê·¸ë˜ì„œ ë‘ë ¤ì›Œí•  ê²ƒë„ ì—†ë‹¤. ì—í”¼ì¿ ë¡œìŠ¤ëŠ” ë§í–ˆë‹¤ - ì£½ìŒì€ ìš°ë¦¬ì™€ ë¬´ê´€í•˜ë‹¤ê³ .',
              icon: 'âš«'
            },
            quote: '"ì£½ìŒì€ ìš°ë¦¬ì™€ ë¬´ê´€í•˜ë‹¤. ìš°ë¦¬ê°€ ìˆìœ¼ë©´ ì£½ìŒì€ ì—†ê³ , ì£½ìŒì´ ì˜¤ë©´ ìš°ë¦¬ê°€ ì—†ë‹¤." - ì—í”¼ì¿ ë¡œìŠ¤'
          },
          {
            id: 'afterlife',
            text: '"ë‹¤ë¥¸ ê³³ìœ¼ë¡œ ê°€ëŠ” ê±° ì•„ë‹ê¹Œ."',
            meaning: 'ìœ¡ì²´ëŠ” ê»ë°ê¸°ë‹¤. ì§„ì§œ ë‚˜ëŠ” ì˜í˜¼ì´ê³ , ì˜í˜¼ì€ ì£½ì§€ ì•ŠëŠ”ë‹¤.',
            principle: {
              name: 'ì˜í˜¼ ë¶ˆë©¸',
              desc: 'ì£½ìŒì€ ëì´ ì•„ë‹ˆë¼ ì´ë™ì´ë‹¤. í”Œë¼í†¤ì€ ì˜í˜¼ì˜ ë¶ˆë©¸ì„, ì¢…êµëŠ” ë‚´ì„¸ë¥¼ ë§í•œë‹¤.',
              icon: 'âœ¨'
            },
            quote: '"ì² í•™ì€ ì£½ìŒì˜ ì—°ìŠµì´ë‹¤." - í”Œë¼í†¤'
          },
          {
            id: 'unknown',
            text: '"ëª¨ë¥´ê² ì–´. ì•„ë¬´ë„ ëª¨ë¥´ì–ì•„."',
            meaning: 'ì •ì§í•œ ëŒ€ë‹µì´ë‹¤. ì£½ì–´ë³¸ ì‚¬ëŒì€ ëŒì•„ì˜¤ì§€ ì•Šì•˜ë‹¤. í™•ì‹ ì€ ê±°ì§“ì´ë‹¤.',
            principle: {
              name: 'ë¶ˆê°€ì§€ë¡ ',
              desc: 'ì•Œ ìˆ˜ ì—†ëŠ” ê²ƒì— ëŒ€í•´ ëª¨ë¥¸ë‹¤ê³  ì¸ì •í•˜ëŠ” ê²ƒ. ì´ê²ƒì´ ì†Œí¬ë¼í…ŒìŠ¤ê°€ ë§í•œ ì§„ì •í•œ ì§€í˜œì˜ ì‹œì‘ì´ë‹¤.',
              icon: 'â“'
            },
            quote: '"ë‚˜ëŠ” ë‚´ê°€ ì•„ë¬´ê²ƒë„ ëª¨ë¥¸ë‹¤ëŠ” ê²ƒì„ ì•ˆë‹¤." - ì†Œí¬ë¼í…ŒìŠ¤'
          },
          {
            id: 'meaning',
            text: '"ì‚¶ì— ì˜ë¯¸ë¥¼ ì£¼ëŠ” ê±°ì§€."',
            meaning: 'ì£½ìŒì´ ìˆì–´ì„œ ì‹œê°„ì´ ì†Œì¤‘í•˜ë‹¤. ì˜ì›íˆ ì‚°ë‹¤ë©´ ì§€ê¸ˆì€ ì˜ë¯¸ê°€ ì—†ë‹¤.',
            principle: {
              name: 'ìœ í•œì„±ì˜ ì˜ë¯¸',
              desc: 'í•œê³„ê°€ ìˆì–´ì„œ ì„ íƒì´ ì˜ë¯¸ë¥¼ ê°–ëŠ”ë‹¤. ë¬´í•œí•œ ì‹œê°„ì—ì„œëŠ” ì•„ë¬´ê²ƒë„ ì¤‘ìš”í•˜ì§€ ì•Šë‹¤.',
              icon: 'â³'
            },
            quote: '"ì£½ìŒì„ ì§ì‹œí•  ë•Œë§Œ ì‚¶ì´ ë³¸ë˜ì ì´ ëœë‹¤." - ë§ˆë¥´í‹´ í•˜ì´ë°ê±°'
          },
          {
            id: 'avoid',
            text: '"ë³„ë¡œ ìƒê° ì•ˆ í•´. ìƒê°í•´ì„œ ë­í•´."',
            meaning: 'ìƒê°í•œë‹¤ê³  ë°”ë€ŒëŠ” ê²ƒ ì—†ë‹¤. ì£½ìŒì„ ë¬»ì–´ë‘ê³  í•˜ë£¨í•˜ë£¨ë¥¼ ì‚°ë‹¤.',
            principle: {
              name: 'ì£½ìŒì˜ ë§ê°',
              desc: 'ëŒ€ë¶€ë¶„ì˜ ì¸ê°„ì€ ì£½ìŒì„ ì™¸ë©´í•˜ë©° ì‚°ë‹¤. í•˜ì´ë°ê±°ê°€ ë¹„íŒí•œ "ì„¸ì¸"ì˜ ì‚¶. í¸í•˜ì§€ë§Œ ì§„ì •ì„±ì´ ì—†ë‹¤.',
              icon: 'ğŸ˜¶'
            },
            quote: '"ì‚¬ëŒë“¤ì€ ì£½ìŒì„ ì–¸ì  ê°€ ì¼ì–´ë‚˜ì§€ë§Œ ë‹¹ì¥ì€ ì•„ë‹Œ ê²ƒìœ¼ë¡œ ì¹˜ë¶€í•œë‹¤." - í•˜ì´ë°ê±°'
          },
          {
            id: 'fear',
            text: '"ì†”ì§íˆ? ë¬´ì„­ì§€."',
            meaning: 'ë‘ë µë‹¤ê³  ì¸ì •í•œë‹¤. ì£½ìŒ ê³µí¬ëŠ” ë¶€ë„ëŸ¬ìš´ ê²Œ ì•„ë‹ˆë‹¤. ì¸ê°„ì˜ ê°€ì¥ ê·¼ë³¸ì ì¸ ê°ì •ì´ë‹¤.',
            principle: {
              name: 'ì£½ìŒ ê³µí¬',
              desc: 'ì–´ë‹ˆìŠ¤íŠ¸ ë² ì»¤ì— ë”°ë¥´ë©´, ì¸ê°„ í–‰ë™ì˜ ìƒë‹¹ ë¶€ë¶„ì€ ì£½ìŒ ê³µí¬ì—ì„œ ë¹„ë¡¯ëœë‹¤. ê³µí¬ë¥¼ ì¸ì •í•˜ëŠ” ê²ƒì´ ì²«ê±¸ìŒì´ë‹¤.',
              icon: 'ğŸ˜¨'
            },
            quote: '"ì£½ìŒì˜ ê³µí¬ëŠ” ëª¨ë“  ê²ƒì˜ ë°‘ë°”íƒ•ì— ìˆë‹¤." - ì–´ë‹ˆìŠ¤íŠ¸ ë² ì»¤'
          }
        ]
      },
      
      // Stage 4: ë§ˆì§€ë§‰ ë‚ 
      {
        badge: 'STAGE 4: ë§ˆì§€ë§‰ ë‚ ',
        title: 'ëˆˆì„ ê°ê¸° ì „',
        desc: 'ë§ˆì§€ë§‰ ë‚ ì´ ì™”ë‹¤.\n\nìˆ¨ì´ ê°€ë¹ ì§„ë‹¤. ì˜ì‹ì´ í¬ë¯¸í•´ì§„ë‹¤.\n\në§ˆì§€ë§‰ ìƒê°ì€...',
        choices: [
          {
            id: 'enough',
            text: '"ëì–´. ì¶©ë¶„íˆ ì‚´ì•˜ì–´."',
            meaning: 'ìš´ëª…ì„ ë°›ì•„ë“¤ì¸ë‹¤. ì£¼ì–´ì§„ ì‚¶ì— ê°ì‚¬í•œë‹¤. ë” ë°”ë¼ì§€ ì•ŠëŠ”ë‹¤.',
            principle: {
              name: 'ì•„ëª¨ë¥´ íŒŒí‹°',
              desc: 'ìš´ëª…ì„ ì‚¬ë‘í•˜ë¼. ì¼ì–´ë‚œ ëª¨ë“  ì¼, ì¼ì–´ë‚  ëª¨ë“  ì¼ì„ ê¸ì •í•˜ë¼. ë‹ˆì²´ì˜ ê°€ì¥ ë†’ì€ ì‚¶ì˜ íƒœë„.',
              icon: 'ğŸ’œ'
            },
            quote: '"ìš´ëª…ì„ ì‚¬ë‘í•˜ë¼. ê·¸ê²ƒì´ ìµœê³ ì˜ ì‚¶ì´ë‹¤." - í”„ë¦¬ë“œë¦¬íˆ ë‹ˆì²´'
          },
          {
            id: 'more',
            text: '"ë” ì‚´ê³  ì‹¶ì—ˆëŠ”ë°."',
            meaning: 'ì‚¶ì— ëŒ€í•œ ì§‘ì°©. ëê¹Œì§€ ì‚´ê³  ì‹¶ì€ ê²ƒ, ê·¸ê²ƒë„ ìì—°ìŠ¤ëŸ½ë‹¤.',
            principle: {
              name: 'ì‚¶ì—ì˜ ì˜ì§€',
              desc: 'ì‡¼íœí•˜ìš°ì–´ê°€ ë§í•œ ë§¹ëª©ì  ì‚¶ì˜ ì¶©ë™. ì´ì„±ìœ¼ë¡œ ì œì–´í•  ìˆ˜ ì—†ëŠ” ê·¼ì›ì  ìš•êµ¬. ì‚´ê³  ì‹¶ë‹¤ëŠ” ê²ƒ.',
              icon: 'ğŸ”¥'
            },
            quote: '"ì‚¶ì—ì˜ ì˜ì§€ëŠ” ê°€ì¥ ê·¼ì›ì ì´ê³  ë¬´ì¡°ê±´ì ì¸ ê²ƒì´ë‹¤." - ì‡¼íœí•˜ìš°ì–´'
          },
          {
            id: 'thanks',
            text: '"ê³ ë§ˆì› ì–´, ë‹¤ë“¤."',
            meaning: 'ê°ì‚¬ë¡œ ë§ˆë¬´ë¦¬í•œë‹¤. ì›ë§ë„, ë¯¸ë ¨ë„ ì•„ë‹Œ ê°ì‚¬.',
            principle: {
              name: 'ê°ì‚¬ì˜ ì² í•™',
              desc: 'ì‚¶ ìì²´ê°€ ì„ ë¬¼ì´ë‹¤. ì£¼ì–´ì§„ ê²ƒì— ê°ì‚¬í•˜ëŠ” íƒœë„. ìŠ¤í† ì•„ ì² í•™ê³¼ ì¢…êµì  ì§€í˜œê°€ ê³µìœ í•˜ëŠ” ë•ëª©.',
              icon: 'ğŸ™'
            },
            quote: '"ê°ì‚¬í•˜ëŠ” ë§ˆìŒì€ ê°€ì¥ ìœ„ëŒ€í•œ ë•ì´ë‹¤." - í‚¤ì¼€ë¡œ'
          },
          {
            id: 'meaningless',
            text: '"ê²°êµ­ ì•„ë¬´ ì˜ë¯¸ ì—†ì—ˆë„¤."',
            meaning: 'ëì—ì„œ ëŒì•„ë³´ë‹ˆ ë‹¤ ë¶€ì§ˆì—†ë‹¤. ë…¸ë ¥ë„, ì„±ì·¨ë„, ê´€ê³„ë„.',
            principle: {
              name: 'í—ˆë¬´',
              desc: 'ëª¨ë“  ì˜ë¯¸ëŠ” ì¸ê°„ì´ ë§Œë“  í™˜ìƒì´ë‹¤. ì£½ìŒ ì•ì—ì„œ ê·¸ í™˜ìƒì´ ë²—ê²¨ì§„ë‹¤. ë‹ˆíë¦¬ì¦˜ì˜ ì§ì‹œ.',
              icon: 'ğŸ•³ï¸'
            },
            quote: '"íƒœì–´ë‚¬ë‹¤ëŠ” ê²ƒì´ ì´ë¯¸ ë¶ˆí–‰ì˜ ì‹œì‘ì´ë‹¤." - ì—ë°€ ì‹œì˜¤ë‘'
          },
          {
            id: 'next',
            text: '"ë‹¤ìŒì—” ë” ì˜ ì‚´ì•„ì•¼ì§€."',
            meaning: 'ì´ë²ˆ ìƒì€ ëë‚˜ë„ ë‹¤ìŒì´ ìˆë‹¤ê³  ë¯¿ëŠ”ë‹¤. ìœ¤íšŒ, í™˜ìƒ, ìƒˆë¡œìš´ ì‹œì‘.',
            principle: {
              name: 'ìœ¤íšŒì  í¬ë§',
              desc: 'ì‚¶ì€ ì›í™˜í•œë‹¤. ì´ë²ˆ ìƒì˜ ì—…ì€ ë‹¤ìŒ ìƒìœ¼ë¡œ ì´ì–´ì§„ë‹¤. ë¶ˆêµì™€ íŒë‘êµì˜ í•µì‹¬ ì„¸ê³„ê´€.',
              icon: 'ğŸ”„'
            },
            quote: '"ì£½ìŒì€ ëì´ ì•„ë‹ˆë¼ ë³€í™”ë‹¤." - ë¶“ë‹¤'
          },
          {
            id: 'empty',
            text: '(ì•„ë¬´ ìƒê° ì—†ì´ ëˆˆì„ ê°ëŠ”ë‹¤)',
            meaning: 'ìƒê°ë„ ì§‘ì°©ì´ë‹¤. ë§ˆì§€ë§‰ ìˆœê°„ì—ë„ ë¬´ì–¸ê°€ë¥¼ ìƒê°í•´ì•¼ í•œë‹¤ëŠ” ê°•ë°•ì„ ë†“ëŠ”ë‹¤.',
            principle: {
              name: 'ë¬´ì‹¬',
              desc: 'ë§ˆìŒì„ ë¹„ìš´ë‹¤. ì§‘ì°©ë„, ë¯¸ë ¨ë„, ìƒê°ë„ ë‚´ë ¤ë†“ëŠ”ë‹¤. ì„ ë¶ˆêµê°€ ì¶”êµ¬í•˜ëŠ” ê¶ê·¹ì˜ ê²½ì§€.',
              icon: 'ğŸŒŠ'
            },
            quote: '"ìƒê°ì´ ì¼ì–´ë‚˜ë©´ ì•Œì•„ì°¨ë¦¬ê³  ë†“ì•„ë¼." - ì„ ë¶ˆêµ'
          }
        ]
      }
    ];
    
    // DOM ìš”ì†Œ
    const gameScreen = document.getElementById('gameScreen');
    const explanationScreen = document.getElementById('explanationScreen');
    const resultScreen = document.getElementById('resultScreen');
    
    // í™”ë©´ ì „í™˜
    function showScreen(screen) {
      [gameScreen, explanationScreen, resultScreen].forEach(s => s.classList.add('hidden'));
      screen.classList.remove('hidden');
    }
    
    // ìŠ¤í…Œì´ì§€ ë Œë”ë§
    function renderStage() {
      const stage = stages[currentStageIndex];
      
      document.getElementById('stageLabel').textContent = `STAGE ${currentStageIndex + 1}`;
      document.getElementById('stageCount').textContent = `${currentStageIndex + 1}/${stages.length}`;
      document.getElementById('progressFill').style.width = `${((currentStageIndex + 1) / stages.length) * 100}%`;
      document.getElementById('stageBadge').textContent = stage.badge;
      document.getElementById('situationTitle').textContent = stage.title;
      document.getElementById('situationDesc').textContent = stage.desc;
      
      const highlightEl = document.getElementById('situationHighlight');
      if (stage.highlight) {
        highlightEl.textContent = stage.highlight;
        highlightEl.classList.remove('hidden');
      } else {
        highlightEl.classList.add('hidden');
      }
      
      const quoteEl = document.getElementById('situationQuote');
      if (stage.quote) {
        quoteEl.textContent = stage.quote;
        quoteEl.classList.remove('hidden');
      } else {
        quoteEl.classList.add('hidden');
      }
      
      // ì„ íƒì§€ ë Œë”ë§
      const choicesContainer = document.getElementById('choices');
      choicesContainer.innerHTML = '';
      
      stage.choices.forEach(choice => {
        const btn = document.createElement('button');
        btn.className = 'sim-choice-btn';
        btn.innerHTML = `
          <span class="sim-choice-text">${choice.text}</span>
          ${choice.subtext ? `<span class="sim-choice-subtext">${choice.subtext}</span>` : ''}
        `;
        btn.addEventListener('click', () => handleChoice(choice));
        choicesContainer.appendChild(btn);
      });
      
      showScreen(gameScreen);
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    // ì„ íƒ ì²˜ë¦¬
    function handleChoice(choice) {
      choices.push({
        stage: currentStageIndex,
        choiceId: choice.id,
        choiceText: choice.text
      });
      
      if (choice.principle) {
        principles.push(choice.principle);
      }
      
      showExplanation(choice);
    }
    
    // í•´ì„¤ í™”ë©´
    function showExplanation(choice) {
      document.getElementById('yourChoice').textContent = choice.text;
      
      const meaningCard = document.getElementById('meaningCard');
      if (choice.meaning) {
        document.getElementById('choiceMeaning').textContent = choice.meaning;
        meaningCard.classList.remove('hidden');
      } else {
        meaningCard.classList.add('hidden');
      }
      
      const principleCard = document.getElementById('principleCard');
      if (choice.principle) {
        document.getElementById('principleName').textContent = `${choice.principle.icon} ${choice.principle.name}`;
        document.getElementById('principleDesc').textContent = choice.principle.desc;
        principleCard.classList.remove('hidden');
      } else {
        principleCard.classList.add('hidden');
      }
      
      const quoteCard = document.getElementById('quoteCard');
      if (choice.quote) {
        document.getElementById('quoteText').textContent = choice.quote;
        quoteCard.classList.remove('hidden');
      } else {
        quoteCard.classList.add('hidden');
      }
      
      const nextBtn = document.getElementById('nextBtn');
      if (currentStageIndex >= stages.length - 1) {
        nextBtn.textContent = 'ê²°ê³¼ ë³´ê¸°';
      } else {
        nextBtn.textContent = 'ë‹¤ìŒìœ¼ë¡œ';
      }
      
      showScreen(explanationScreen);
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    // ë‹¤ìŒ ë²„íŠ¼
    document.getElementById('nextBtn').addEventListener('click', () => {
      currentStageIndex++;
      if (currentStageIndex >= stages.length) {
        showResult();
      } else {
        renderStage();
      }
    });
    
    // ê²°ê³¼ ê³„ì‚°
    function calculateResult() {
      const choiceIds = choices.map(c => c.choiceId);
      
      // Stage 1 ë°˜ì‘ ê¸°ë°˜
      const stage1 = choiceIds[0];
      // Stage 2 ì‹œê°„ í™œìš©
      const stage2 = choiceIds[1];
      // Stage 3 ì£½ìŒê´€
      const stage3 = choiceIds[2];
      // Stage 4 ë§ˆì§€ë§‰
      const stage4 = choiceIds[3];
      
      // ìœ í˜• íŒì • ë¡œì§
      // ìŠ¤í† ì•„ì  í˜„ì: ìˆ˜ìš© + ì¼ìƒ ë˜ëŠ” ë‹´ë‹´í•œ ì„ íƒë“¤
      if ((stage1 === 'accept' || stage4 === 'enough' || stage4 === 'thanks') && 
          (stage2 === 'normal' || stage3 === 'nothing' || stage3 === 'meaning')) {
        return {
          icon: 'ğŸ›ï¸',
          title: 'ìŠ¤í† ì•„ì  í˜„ì',
          desc: 'ë‹¹ì‹ ì€ ì£½ìŒì„ ë‹´ë‹´íˆ ë°›ì•„ë“¤ì…ë‹ˆë‹¤. í†µì œí•  ìˆ˜ ì—†ëŠ” ê²ƒì— ì €í•­í•˜ì§€ ì•Šê³ , ì£¼ì–´ì§„ ì‚¶ì— ê°ì‚¬í•©ë‹ˆë‹¤. ì—í”½í…Œí† ìŠ¤ì™€ ë§ˆë¥´ì¿ ìŠ¤ ì•„ìš°ë ë¦¬ìš°ìŠ¤ê°€ ì¶”êµ¬í•œ ì§€í˜œì˜ ê¸¸ì„ ê±·ê³  ìˆìŠµë‹ˆë‹¤.'
        };
      }
      
      // ì‹¤ì¡´ì  íˆ¬ì‚¬: ììœ , ì˜ë¯¸, ì§ì‹œ
      if ((stage1 === 'laugh' || stage3 === 'meaning') && 
          (stage4 === 'enough' || stage4 === 'more')) {
        return {
          icon: 'âš”ï¸',
          title: 'ì‹¤ì¡´ì  íˆ¬ì‚¬',
          desc: 'ë‹¹ì‹ ì€ ì£½ìŒì„ ì§ì‹œí•˜ê³  ê·¸ ì•ˆì—ì„œ ììœ ë¥¼ ì°¾ìŠµë‹ˆë‹¤. ì‚¶ì˜ ìœ í•œí•¨ì´ ì˜¤íˆë ¤ ì˜ë¯¸ë¥¼ ë§Œë“ ë‹¤ê³  ë¯¿ìŠµë‹ˆë‹¤. í•˜ì´ë°ê±°ì™€ ì‚¬ë¥´íŠ¸ë¥´ê°€ ë§í•œ ë³¸ë˜ì  ì‹¤ì¡´ì„ ì‚´ê³  ìˆìŠµë‹ˆë‹¤.'
        };
      }
      
      // ì¾Œë½ì£¼ì˜ì: ë²„í‚·ë¦¬ìŠ¤íŠ¸, ì¹´ë¥´í˜ ë””ì— 
      if (stage2 === 'bucket') {
        return {
          icon: 'ğŸ‰',
          title: 'ì¾Œë½ì£¼ì˜ì',
          desc: 'ë‹¹ì‹ ì€ ë‚¨ì€ ì‹œê°„ì„ ìµœëŒ€í•œ ì¦ê¸°ë ¤ í•©ë‹ˆë‹¤. í˜¸ë¼í‹°ìš°ìŠ¤ì˜ "ì¹´ë¥´í˜ ë””ì— "ì„ ì‹¤ì²œí•©ë‹ˆë‹¤. ë‚´ì¼ì€ ì—†ì„ ìˆ˜ ìˆìœ¼ë‹ˆ, ì˜¤ëŠ˜ì„ ì¡ìœ¼ì„¸ìš”.'
        };
      }
      
      // í—ˆë¬´ì£¼ì˜ì: ëƒ‰ì†Œ, ë¬´ì˜ë¯¸
      if ((stage1 === 'cynical' || stage4 === 'meaningless') && 
          (stage3 === 'avoid' || stage3 === 'nothing')) {
        return {
          icon: 'ğŸ•³ï¸',
          title: 'í—ˆë¬´ì£¼ì˜ì',
          desc: 'ë‹¹ì‹ ì€ ì‚¶ì˜ ë¬´ì˜ë¯¸í•¨ì„ ì§ì‹œí•©ë‹ˆë‹¤. ëª¨ë“  ê²ƒì´ ë¶€ì§ˆì—†ë‹¤ëŠ” ê²ƒì„ ì•Œì§€ë§Œ, ê·¸ë˜ì„œ ë” ììœ ë¡­ê¸°ë„ í•©ë‹ˆë‹¤. ì‹œì˜¤ë‘ì´ ë§í•œ "íƒœì–´ë‚œ ê²ƒì˜ ë¶ˆí–‰"ì„ ì´í•´í•˜ëŠ” ì‚¬ëŒì…ë‹ˆë‹¤.'
        };
      }
      
      // ì˜ì  ìˆœë¡€ì: ê¸°ë„, ì˜í˜¼ ë¶ˆë©¸, ìœ¤íšŒ
      if ((stage2 === 'pray' || stage3 === 'afterlife' || stage4 === 'next')) {
        return {
          icon: 'âœ¨',
          title: 'ì˜ì  ìˆœë¡€ì',
          desc: 'ë‹¹ì‹ ì€ ì£½ìŒ ë„ˆë¨¸ì˜ ì„¸ê³„ë¥¼ ë¯¿ìŠµë‹ˆë‹¤. í”Œë¼í†¤ì˜ ì˜í˜¼ ë¶ˆë©¸ì´ë“ , ì¢…êµì  ë‚´ì„¸ë“ , ìœ¤íšŒë“  - ì´ ì„¸ìƒì´ ì „ë¶€ê°€ ì•„ë‹ˆë¼ëŠ” í¬ë§ì„ í’ˆê³  ìˆìŠµë‹ˆë‹¤.'
        };
      }
      
      // ê´€ê³„ ì¤‘ì‹¬ì: ì‚¬ëŒ, ê°ì‚¬
      if ((stage2 === 'people' || stage4 === 'thanks')) {
        return {
          icon: 'ğŸ¤',
          title: 'ê´€ê³„ ì¤‘ì‹¬ì',
          desc: 'ë‹¹ì‹ ì—ê²Œ ì‚¶ì˜ ì˜ë¯¸ëŠ” ì‚¬ëŒì…ë‹ˆë‹¤. ë§ˆë¥´í‹´ ë¶€ë²„ê°€ ë§í•œ "ë‚˜ì™€ ë„ˆ"ì˜ ë§Œë‚¨ì´ ì§„ì •í•œ ì‚¶ì´ë¼ê³  ë¯¿ìŠµë‹ˆë‹¤. ë§ˆì§€ë§‰ê¹Œì§€ ì†Œì¤‘í•œ ì‚¬ëŒë“¤ê³¼ í•¨ê»˜í•˜ëŠ” ê²ƒì´ ë‹¹ì‹ ì˜ ì„ íƒì…ë‹ˆë‹¤.'
        };
      }
      
      // ìœ ì‚° ê±´ì„¤ì: ë‚¨ê¸°ê¸°
      if (stage2 === 'legacy') {
        return {
          icon: 'ğŸ“š',
          title: 'ìœ ì‚° ê±´ì„¤ì',
          desc: 'ë‹¹ì‹ ì€ ë¬´ì–¸ê°€ë¥¼ ë‚¨ê¸°ê³  ì‹¶ì–´í•©ë‹ˆë‹¤. ì–´ë‹ˆìŠ¤íŠ¸ ë² ì»¤ê°€ ë§í•œ "ë¶ˆë©¸ í”„ë¡œì íŠ¸"ë¥¼ ì¶”êµ¬í•©ë‹ˆë‹¤. ìœ¡ì²´ëŠ” ì£½ì–´ë„ ë‹¹ì‹ ì˜ í”ì ì€ ë‚¨ì„ ê²ƒì…ë‹ˆë‹¤.'
        };
      }
      
      // ê¸°ë³¸ê°’: êµ¬ë„ì
      return {
        icon: 'ğŸŒ…',
        title: 'ì‚¶ì˜ êµ¬ë„ì',
        desc: 'ë‹¹ì‹ ì€ í•˜ë‚˜ì˜ íƒœë„ë¡œ ì •ì˜ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì£½ìŒ ì•ì—ì„œ ë‹¤ì–‘í•œ ê°ì •ê³¼ ìƒê°ì´ êµì°¨í•©ë‹ˆë‹¤. ê·¸ê²ƒì´ ì¸ê°„ì…ë‹ˆë‹¤. ë‹µì„ ì°¾ëŠ” ì—¬ì • ìì²´ê°€ ì˜ë¯¸ ìˆìŠµë‹ˆë‹¤.'
      };
    }
    
    // ê²°ê³¼ í™”ë©´
    function showResult() {
      const result = calculateResult();
      
      document.getElementById('resultIcon').textContent = result.icon;
      document.getElementById('resultTitle').textContent = result.title;
      document.getElementById('resultDesc').textContent = result.desc;
      
      // ë°œê²¬í•œ ì›ì¹™ í‘œì‹œ
      if (principles.length > 0) {
        const principlesList = document.getElementById('principlesList');
        principlesList.innerHTML = '<div class="sim-principles-list-title">ğŸ’ ë°œê²¬í•œ ì›ì¹™ë“¤</div>';
        principles.forEach(p => {
          const item = document.createElement('div');
          item.className = 'sim-principles-item';
          item.innerHTML = `
            <span class="sim-principles-item-icon">${p.icon}</span>
            <div>
              <div class="sim-principles-item-name">${p.name}</div>
              <div class="sim-principles-item-desc">${p.desc}</div>
            </div>
          `;
          principlesList.appendChild(item);
        });
        principlesList.classList.remove('hidden');
      }
      
      // í”„ë¡œí•„ ì €ì¥
      saveProgress(result);
      
      showScreen(resultScreen);
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    // í”„ë¡œí•„ ì €ì¥
    function saveProgress(result) {
      let profile = JSON.parse(localStorage.getItem(STORAGE_KEY));
      
      if (!profile) {
        profile = { version: 5, name: 'ìµëª… íƒí—˜ê°€', level: 1, exp: 0, completedSims: [], principles: [] };
      }
      
      if (!profile.completedSims) profile.completedSims = [];
      if (!profile.principles) profile.principles = [];
      
      // ì™„ë£Œ ì²´í¬ ë° ê²½í—˜ì¹˜
      if (!profile.completedSims.includes('death')) {
        profile.completedSims.push('death');
        profile.exp = (profile.exp || 0) + 30;
      }
      
      // ì›ì¹™ ì €ì¥ (ë¬¸ìì—´ë¡œ)
      principles.forEach(p => {
        if (!profile.principles.includes(p.name)) {
          profile.principles.push(p.name);
        }
      });
      
      localStorage.setItem(STORAGE_KEY, JSON.stringify(profile));
    }
    
    // ê³µìœ 
    document.getElementById('shareBtn').addEventListener('click', async () => {
      const result = calculateResult();
      const text = `${result.icon} ë‚˜ì˜ ì£½ìŒê´€ ìœ í˜•: ${result.title}

"6ê°œì›” ë‚¨ì•˜ìŠµë‹ˆë‹¤."
ì´ ë§ì„ ë“¤ìœ¼ë©´ ë‹¹ì‹ ì€ ì–´ë–»ê²Œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?

â–¶ í…ŒìŠ¤íŠ¸ í•´ë³´ê¸°
https://bit.ly/3Z9ZFPq`;
      
      if (navigator.share) {
        try {
          await navigator.share({ title: 'ì£½ìŒì„ ì•ë‘” ì„ íƒ', text });
        } catch (e) {}
      } else {
        try {
          await navigator.clipboard.writeText(text);
          alert('ê²°ê³¼ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
        } catch (e) {
          alert('ê³µìœ  ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        }
      }
    });
    
    // ì‹œì‘
    renderStage();
  </script>
</body>
</html>
